# UEModManager åˆ†ç±»ç³»ç»Ÿé‡æ„ä¿®æ”¹è®°å½•

**ä¿®æ”¹æ—¥æœŸï¼š** 2025-10-05
**ä¿®æ”¹ç‰ˆæœ¬ï¼š** v1.7.37
**ä¿®æ”¹èŒƒå›´ï¼š** åˆ†ç±»æ˜¾ç¤ºåç§°ã€è½¯åˆ é™¤ã€æ•°æ®æŒä¹…åŒ–
**ä¿®æ”¹äººå‘˜ï¼š** Claude Code (AI Assistant)

---

## ğŸ“‹ ç›®å½•

1. [ä¿®æ”¹èƒŒæ™¯](#ä¿®æ”¹èƒŒæ™¯)
2. [éœ€æ±‚æ¦‚è¿°](#éœ€æ±‚æ¦‚è¿°)
3. [æŠ€æœ¯æ–¹æ¡ˆ](#æŠ€æœ¯æ–¹æ¡ˆ)
4. [ä»£ç å˜æ›´è¯¦æƒ…](#ä»£ç å˜æ›´è¯¦æƒ…)
5. [é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ](#é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ)
6. [æµ‹è¯•éªŒè¯](#æµ‹è¯•éªŒè¯)
7. [æ³¨æ„äº‹é¡¹](#æ³¨æ„äº‹é¡¹)
8. [åç»­ç»´æŠ¤æŒ‡å—](#åç»­ç»´æŠ¤æŒ‡å—)

---

## ä¿®æ”¹èƒŒæ™¯

### åŸæœ‰é—®é¢˜
1. **åˆ†ç±»é‡å‘½åä¼šå½±å“MODæ ‡ç­¾**ï¼šé‡å‘½ååˆ†ç±»ä¼šåŒæ­¥ä¿®æ”¹æ‰€æœ‰MODçš„æ ‡ç­¾å­—æ®µï¼Œå¯¼è‡´æ•°æ®ä¸€è‡´æ€§é—®é¢˜
2. **åˆ é™¤åˆ†ç±»ä¼šä¸¢å¤±æ•°æ®**ï¼šåˆ é™¤æœ‰MODçš„åˆ†ç±»ä¼šç›´æ¥åˆ é™¤åˆ†ç±»ï¼ŒMODå¤±å»åˆ†ç±»å½’å±
3. **é»˜è®¤åˆ†ç±»ä¸å¯ç¼–è¾‘**ï¼šé¢éƒ¨ã€äººç‰©ã€æ­¦å™¨ç­‰é»˜è®¤åˆ†ç±»æ— æ³•é‡å‘½åæˆ–åˆ é™¤ï¼Œé™åˆ¶ç”¨æˆ·è‡ªå®šä¹‰éœ€æ±‚
4. **åˆ·æ–°åæ•°æ®ä¸¢å¤±**ï¼šMODåˆ†ç±»åœ¨åˆ·æ–°åä¼šè¢«é‡ç½®ä¸ºé»˜è®¤å€¼

### ç”¨æˆ·éœ€æ±‚æ¼”è¿›

**ç¬¬ä¸€é˜¶æ®µï¼š** åˆ†ç¦»æ˜¾ç¤ºåç§°ä¸æ ‡ç­¾åç§°
- é‡å‘½ååˆ†ç±»åªä¿®æ”¹UIæ˜¾ç¤ºï¼Œä¸å½±å“MODæ ‡ç­¾
- å³é”®èœå•æ˜¾ç¤º "æ ‡ç­¾åï¼ˆæ˜¾ç¤ºåï¼‰" æ ¼å¼

**ç¬¬äºŒé˜¶æ®µï¼š** å®ç°è½¯åˆ é™¤æœºåˆ¶
- åˆ é™¤åˆ†ç±»æ”¹ä¸ºéšè—ï¼Œè€ŒéçœŸåˆ é™¤
- åˆ é™¤å‰è‡ªåŠ¨å°†MODç§»åŠ¨åˆ°"æœªåˆ†ç±»"
- æ™ºèƒ½æ˜¾ç¤ºï¼šå½“MODä½¿ç”¨éšè—åˆ†ç±»æ—¶è‡ªåŠ¨æ˜¾ç¤ºè¯¥åˆ†ç±»

**ç¬¬ä¸‰é˜¶æ®µï¼š** ä¿®å¤æŒä¹…åŒ–é—®é¢˜
- é»˜è®¤åˆ†ç±»ï¼ˆé¢éƒ¨ã€äººç‰©ã€æ­¦å™¨ç­‰ï¼‰æ— æ³•éšè—
- æ–°å»ºåˆ†ç±»å¯ä»¥éšè—ï¼Œä½†é»˜è®¤åˆ†ç±»ä¼šé‡æ–°å‡ºç°
- MODåˆ†ç±»åœ¨åˆ·æ–°åè¢«é‡ç½®

---

## éœ€æ±‚æ¦‚è¿°

### æ ¸å¿ƒåŠŸèƒ½éœ€æ±‚

#### 1. åˆ†ç±»æ˜¾ç¤ºåç§°ç®¡ç†
- **éœ€æ±‚æè¿°**ï¼šå…è®¸ç”¨æˆ·è‡ªå®šä¹‰åˆ†ç±»çš„æ˜¾ç¤ºåç§°ï¼Œä½†ä¸ä¿®æ”¹åº•å±‚æ ‡ç­¾å
- **å®ç°æ–¹å¼**ï¼šæ–°å¢ `DisplayName` å±æ€§ï¼Œç‹¬ç«‹äº `Name`ï¼ˆæ ‡ç­¾åï¼‰
- **æ˜¾ç¤ºè§„åˆ™**ï¼š
  - å·¦ä¾§åˆ†ç±»åˆ—è¡¨æ˜¾ç¤º `DisplayName`ï¼ˆå¦‚æœæœ‰ï¼‰æˆ– `Name`
  - å³ä¾§MODæ ‡ç­¾å§‹ç»ˆæ˜¾ç¤ºåŸå§‹ `Name`
  - å³é”®ç§»åŠ¨åˆ†ç±»èœå•æ˜¾ç¤º "æ ‡ç­¾åï¼ˆæ˜¾ç¤ºåï¼‰" æˆ– "æ ‡ç­¾å"

#### 2. è½¯åˆ é™¤æœºåˆ¶
- **éœ€æ±‚æè¿°**ï¼šåˆ é™¤åˆ†ç±»ä¸å®é™…åˆ é™¤ï¼Œè€Œæ˜¯éšè—
- **å®ç°æ–¹å¼**ï¼šæ–°å¢ `IsHidden` å±æ€§ä½œä¸ºéšè—æ ‡è®°
- **åˆ é™¤æµç¨‹**ï¼š
  1. æ£€æŸ¥åˆ†ç±»ä¸‹æ˜¯å¦æœ‰MOD
  2. å¦‚æœ‰MODï¼Œè‡ªåŠ¨ç§»åŠ¨åˆ°"æœªåˆ†ç±»"
  3. è®¾ç½® `IsHidden = true`
  4. ä¿å­˜é…ç½®å¹¶åˆ·æ–°æ˜¾ç¤º
- **æ™ºèƒ½æ˜¾ç¤º**ï¼šå½“MODä½¿ç”¨éšè—åˆ†ç±»æ—¶ï¼Œè‡ªåŠ¨æ˜¾ç¤ºè¯¥åˆ†ç±»

#### 3. é…ç½®æŒä¹…åŒ–
- **éœ€æ±‚æè¿°**ï¼šåˆ†ç±»é…ç½®ï¼ˆDisplayNameã€IsHiddenï¼‰éœ€è¦æŒä¹…åŒ–å­˜å‚¨
- **å­˜å‚¨ä½ç½®**ï¼š`%AppData%\UEModManager\{gamename}_category_display.json`
- **å­˜å‚¨å†…å®¹**ï¼š
```json
{
  "é¢éƒ¨": {
    "DisplayName": "é¢éƒ¨MOD",
    "IsHidden": false
  },
  "æ­¦å™¨": {
    "DisplayName": null,
    "IsHidden": true
  }
}
```

#### 4. æ•°æ®åŒæ­¥
- **éœ€æ±‚æè¿°**ï¼šåˆ·æ–°æ“ä½œä¸åº”ä¸¢å¤±ç”¨æˆ·è‡ªå®šä¹‰çš„åˆ†ç±»é…ç½®
- **å®ç°æ–¹å¼**ï¼šä»é…ç½®æ–‡ä»¶åŠ è½½ï¼Œè€Œéä»å†…å­˜é›†åˆ

---

## æŠ€æœ¯æ–¹æ¡ˆ

### æ¶æ„è®¾è®¡

#### æ•°æ®æ¨¡å‹å±‚
```csharp
public class Category : INotifyPropertyChanged
{
    // ä¸å¯å˜æ ‡ç­¾åï¼ˆç”¨äºMODå…³è”ï¼‰
    public string Name { get; set; }

    // å¯å˜æ˜¾ç¤ºåï¼ˆç”¨äºUIæ˜¾ç¤ºï¼‰
    public string? DisplayName { get; set; }

    // è½¯åˆ é™¤æ ‡è®°
    public bool IsHidden { get; set; }

    // è®¡ç®—å±æ€§ï¼ˆç”¨äºç»‘å®šï¼‰
    public string DisplayText => DisplayName ?? Name;

    // MODæ•°é‡
    public int Count { get; set; }
}
```

#### é…ç½®æ¨¡å‹å±‚
```csharp
public class CategoryDisplayConfig
{
    public string? DisplayName { get; set; }
    public bool IsHidden { get; set; }
}
```

#### æ•°æ®æµå›¾
```
ç”¨æˆ·æ“ä½œ (é‡å‘½å/åˆ é™¤)
    â†“
æ›´æ–° Category å¯¹è±¡ (DisplayName/IsHidden)
    â†“
SaveCategoryDisplayConfig() - ä¿å­˜åˆ°é…ç½®æ–‡ä»¶
    â†“
RefreshCategoryDisplay() - åˆ·æ–°UI
    â†“
ä»é…ç½®æ–‡ä»¶åŠ è½½ DisplayName å’Œ IsHidden
    â†“
è¿‡æ»¤ IsHidden = true çš„åˆ†ç±»
    â†“
æ›´æ–° ObservableCollection<Category>
    â†“
UI è‡ªåŠ¨åˆ·æ–°ï¼ˆæ•°æ®ç»‘å®šï¼‰
```

### å…³é”®æŠ€æœ¯ç‚¹

#### 1. é…ç½®åˆå¹¶ç­–ç•¥
**é—®é¢˜**ï¼š`categories` é›†åˆåªåŒ…å«å¯è§åˆ†ç±»ï¼Œç›´æ¥ä¿å­˜ä¼šä¸¢å¤±å·²éšè—åˆ†ç±»çš„é…ç½®

**è§£å†³æ–¹æ¡ˆ**ï¼šä¿å­˜æ—¶å…ˆåŠ è½½ç°æœ‰é…ç½®ï¼Œå†åˆå¹¶æ›´æ–°
```csharp
// æ­¥éª¤1ï¼šåŠ è½½ç°æœ‰é…ç½®
var config = LoadExistingConfig() ?? new Dictionary<...>();

// æ­¥éª¤2ï¼šæ›´æ–°/æ·»åŠ å½“å‰å¯è§åˆ†ç±»
foreach (var cat in categories) {
    config[cat.Name] = new CategoryDisplayConfig { ... };
}

// æ­¥éª¤3ï¼šä¿å­˜åˆå¹¶åçš„é…ç½®
SaveConfig(config);
```

#### 2. ä»é…ç½®æ–‡ä»¶åŠ è½½çŠ¶æ€
**é—®é¢˜**ï¼š`RefreshCategoryDisplay()` ä»å†…å­˜é›†åˆåŠ è½½é…ç½®ï¼Œå¯¼è‡´éšè—çŠ¶æ€ä¸¢å¤±

**è§£å†³æ–¹æ¡ˆ**ï¼šç›´æ¥ä»é…ç½®æ–‡ä»¶åŠ è½½
```csharp
// ä»æ–‡ä»¶åŠ è½½é…ç½®
var savedConfig = LoadConfigFromFile();

// åº”ç”¨åˆ°æ–°åˆ†ç±»
foreach (var cat in newCategories) {
    if (savedConfig.TryGetValue(cat.Name, out var config)) {
        cat.DisplayName = config.DisplayName;
        cat.IsHidden = config.IsHidden;
    }
}
```

#### 3. é¿å…é‡å¤åˆå§‹åŒ–
**é—®é¢˜**ï¼š`InitializeDefaultCategories()` åœ¨åˆ·æ–°åé‡æ–°æ·»åŠ é»˜è®¤åˆ†ç±»ï¼Œè¦†ç›– `IsHidden` çŠ¶æ€

**è§£å†³æ–¹æ¡ˆ**ï¼šç§»é™¤ `RefreshCategoryDisplay()` ä¸­çš„ `InitializeDefaultCategories()` è°ƒç”¨ï¼Œé»˜è®¤åˆ†ç±»å·²åœ¨å‰é¢é€»è¾‘ä¸­å¤„ç†

#### 4. ç»Ÿä¸€æ•°æ®æ¢å¤é€»è¾‘
**é—®é¢˜**ï¼š`RefreshButton_Click()` æœ‰ä¸‰æ¬¡æ•°æ®æ¢å¤ï¼Œä¸”æŸ¥è¯¢é€»è¾‘ä¸ä¸€è‡´ï¼Œå¯¼è‡´æ•°æ®ä¸¢å¤±

**è§£å†³æ–¹æ¡ˆ**ï¼šç§»é™¤å†—ä½™çš„ç¬¬ä¸‰æ¬¡æ¢å¤ï¼Œä¾èµ– `InitializeModsForGame()` çš„ç»Ÿä¸€æ¢å¤é€»è¾‘

---

## ä»£ç å˜æ›´è¯¦æƒ…

### æ–‡ä»¶æ¸…å•
1. `D:\cursor\2.0backup\backup_v1.7.32\UEModManager\MainWindow.xaml` - UIç»‘å®šä¿®æ”¹
2. `D:\cursor\2.0backup\backup_v1.7.32\UEModManager\MainWindow.xaml.cs` - ä¸šåŠ¡é€»è¾‘ä¿®æ”¹

---

### å˜æ›´1: UIç»‘å®šä¿®æ”¹

**æ–‡ä»¶**ï¼š`MainWindow.xaml`
**ä½ç½®**ï¼šç¬¬ 168 è¡Œ

#### ä¿®æ”¹å‰
```xml
<TextBlock Name="CategoryName" Grid.Column="0" Text="{Binding Name}"
           FontSize="14" Foreground="White" VerticalAlignment="Center"
           Margin="5,0,0,0"/>
```

#### ä¿®æ”¹å
```xml
<TextBlock Name="CategoryName" Grid.Column="0" Text="{Binding DisplayText}"
           FontSize="14" Foreground="White" VerticalAlignment="Center"
           Margin="5,0,0,0"/>
```

#### è¯´æ˜
- ç»‘å®šä» `Name` æ”¹ä¸º `DisplayText`
- `DisplayText` æ˜¯è®¡ç®—å±æ€§ï¼š`DisplayName ?? Name`
- å½“æœ‰è‡ªå®šä¹‰æ˜¾ç¤ºåç§°æ—¶æ˜¾ç¤º `DisplayName`ï¼Œå¦åˆ™æ˜¾ç¤ºåŸå§‹ `Name`

---

### å˜æ›´2: Category æ•°æ®æ¨¡å‹æ‰©å±•

**æ–‡ä»¶**ï¼š`MainWindow.xaml.cs`
**ä½ç½®**ï¼šç¬¬ 10623-10691 è¡Œ

#### æ–°å¢ä»£ç 
```csharp
public class Category : INotifyPropertyChanged
{
    private string _name = "";
    public string Name
    {
        get => _name;
        set
        {
            if (_name != value)
            {
                _name = value;
                OnPropertyChanged(nameof(Name));
                OnPropertyChanged(nameof(DisplayText));
            }
        }
    }

    private string? _displayName;
    public string? DisplayName
    {
        get => _displayName;
        set
        {
            if (_displayName != value)
            {
                _displayName = value;
                OnPropertyChanged(nameof(DisplayName));
                OnPropertyChanged(nameof(DisplayText));
            }
        }
    }

    private bool _isHidden;
    public bool IsHidden
    {
        get => _isHidden;
        set
        {
            if (_isHidden != value)
            {
                _isHidden = value;
                OnPropertyChanged(nameof(IsHidden));
            }
        }
    }

    // è®¡ç®—å±æ€§ï¼šä¼˜å…ˆæ˜¾ç¤ºDisplayNameï¼Œå¦åˆ™æ˜¾ç¤ºName
    public string DisplayText => DisplayName ?? Name;

    private int _count;
    public int Count
    {
        get => _count;
        set
        {
            if (_count != value)
            {
                _count = value;
                OnPropertyChanged(nameof(Count));
            }
        }
    }

    public event PropertyChangedEventHandler? PropertyChanged;

    protected virtual void OnPropertyChanged(string propertyName)
    {
        PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(propertyName));
    }
}
```

#### è¯´æ˜
- **Name**ï¼šä¸å¯å˜æ ‡ç­¾åï¼Œç”¨äºMODå…³è”ï¼ˆ`mod.Type`ã€`mod.Categories`ï¼‰
- **DisplayName**ï¼šå¯å˜æ˜¾ç¤ºåï¼Œä»…ç”¨äºUIå±•ç¤º
- **IsHidden**ï¼šè½¯åˆ é™¤æ ‡è®°ï¼Œ`true` è¡¨ç¤ºå·²éšè—
- **DisplayText**ï¼šè®¡ç®—å±æ€§ï¼Œæ•°æ®ç»‘å®šä½¿ç”¨
- **INotifyPropertyChanged**ï¼šæ”¯æŒWPFæ•°æ®ç»‘å®šè‡ªåŠ¨æ›´æ–°

---

### å˜æ›´3: CategoryDisplayConfig é…ç½®æ¨¡å‹

**æ–‡ä»¶**ï¼š`MainWindow.xaml.cs`
**ä½ç½®**ï¼šç¬¬ 10693-10697 è¡Œ

#### æ–°å¢ä»£ç 
```csharp
public class CategoryDisplayConfig
{
    public string? DisplayName { get; set; }
    public bool IsHidden { get; set; }
}
```

#### è¯´æ˜
- ç”¨äº JSON åºåˆ—åŒ–/ååºåˆ—åŒ–
- å¯¹åº”é…ç½®æ–‡ä»¶ä¸­æ¯ä¸ªåˆ†ç±»çš„é…ç½®é¡¹

---

### å˜æ›´4: GetCategoryDisplayConfigPath æ–¹æ³•

**æ–‡ä»¶**ï¼š`MainWindow.xaml.cs`
**ä½ç½®**ï¼šç¬¬ 10582-10590 è¡Œ

#### æ–°å¢ä»£ç 
```csharp
private string GetCategoryDisplayConfigPath()
{
    var appDataPath = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData);
    var modManagerPath = Path.Combine(appDataPath, "UEModManager");
    Directory.CreateDirectory(modManagerPath);

    var configFileName = $"{_currentGame}_category_display.json";
    return Path.Combine(modManagerPath, configFileName);
}
```

#### è¯´æ˜
- æ¯ä¸ªæ¸¸æˆç‹¬ç«‹çš„é…ç½®æ–‡ä»¶
- å­˜å‚¨åœ¨ `%AppData%\UEModManager\`
- æ–‡ä»¶åæ ¼å¼ï¼š`{æ¸¸æˆå}_category_display.json`

---

### å˜æ›´5: SaveCategoryDisplayConfig æ–¹æ³•ï¼ˆé…ç½®åˆå¹¶ç­–ç•¥ï¼‰

**æ–‡ä»¶**ï¼š`MainWindow.xaml.cs`
**ä½ç½®**ï¼šç¬¬ 10514-10575 è¡Œ

#### å®Œæ•´ä»£ç 
```csharp
private void SaveCategoryDisplayConfig()
{
    try
    {
        if (categories == null || categories.Count == 0)
        {
            Console.WriteLine("[ä¿å­˜] categories ä¸ºç©ºï¼Œè·³è¿‡ä¿å­˜");
            return;
        }

        // æ–¹æ¡ˆAï¼šå…ˆåŠ è½½ç°æœ‰é…ç½®ï¼Œç„¶ååˆå¹¶æ›´æ–°ï¼Œé¿å…ä¸¢å¤±å·²éšè—åˆ†ç±»çš„é…ç½®
        var config = new Dictionary<string, CategoryDisplayConfig>();

        // æ­¥éª¤1ï¼šåŠ è½½ç°æœ‰é…ç½®æ–‡ä»¶
        var configPath = GetCategoryDisplayConfigPath();
        if (File.Exists(configPath))
        {
            try
            {
                var existingJson = File.ReadAllText(configPath, System.Text.Encoding.UTF8);
                var existingConfig = System.Text.Json.JsonSerializer.Deserialize<Dictionary<string, CategoryDisplayConfig>>(existingJson);
                if (existingConfig != null)
                {
                    config = existingConfig;
                    Console.WriteLine($"[ä¿å­˜] åŠ è½½ç°æœ‰é…ç½®: {config.Count} ä¸ªåˆ†ç±»");
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine($"[è­¦å‘Š] åŠ è½½ç°æœ‰é…ç½®å¤±è´¥ï¼Œå°†ä½¿ç”¨æ–°é…ç½®: {ex.Message}");
            }
        }

        // æ­¥éª¤2ï¼šæ›´æ–°/æ·»åŠ å½“å‰å¯è§åˆ†ç±»çš„é…ç½®
        foreach (var cat in categories)
        {
            // åªä¿å­˜æœ‰è‡ªå®šä¹‰é…ç½®çš„åˆ†ç±»ï¼ˆæœ‰DisplayNameæˆ–IsHiddençš„ï¼‰
            if (!string.IsNullOrEmpty(cat.DisplayName) || cat.IsHidden)
            {
                config[cat.Name] = new CategoryDisplayConfig
                {
                    DisplayName = cat.DisplayName,
                    IsHidden = cat.IsHidden
                };
                Console.WriteLine($"[ä¿å­˜] æ›´æ–°åˆ†ç±» '{cat.Name}': DisplayName={cat.DisplayName}, IsHidden={cat.IsHidden}");
            }
            else
            {
                // å¦‚æœæ²¡æœ‰è‡ªå®šä¹‰é…ç½®ï¼Œä»é…ç½®ä¸­ç§»é™¤ï¼ˆä½¿ç”¨é»˜è®¤å€¼ï¼‰
                config.Remove(cat.Name);
                Console.WriteLine($"[ä¿å­˜] ç§»é™¤åˆ†ç±» '{cat.Name}' çš„é…ç½®ï¼ˆä½¿ç”¨é»˜è®¤ï¼‰");
            }
        }

        // æ­¥éª¤3ï¼šä¿å­˜åˆå¹¶åçš„é…ç½®
        var options = new System.Text.Json.JsonSerializerOptions
        {
            WriteIndented = true,
            Encoder = System.Text.Encodings.Web.JavaScriptEncoder.UnsafeRelaxedJsonEscaping
        };
        var json = System.Text.Json.JsonSerializer.Serialize(config, options);
        File.WriteAllText(configPath, json, System.Text.Encoding.UTF8);

        Console.WriteLine($"[ä¿å­˜] åˆ†ç±»æ˜¾ç¤ºé…ç½®å·²ä¿å­˜åˆ°: {configPath}");
        Console.WriteLine($"[ä¿å­˜] å…±ä¿å­˜ {config.Count} ä¸ªåˆ†ç±»é…ç½®ï¼ˆå«å·²éšè—åˆ†ç±»ï¼‰");
    }
    catch (Exception ex)
    {
        Console.WriteLine($"[é”™è¯¯] ä¿å­˜åˆ†ç±»æ˜¾ç¤ºé…ç½®å¤±è´¥: {ex.Message}");
    }
}
```

#### å…³é”®é€»è¾‘
1. **åŠ è½½ç°æœ‰é…ç½®**ï¼šé¿å…ä¸¢å¤±å·²éšè—åˆ†ç±»çš„é…ç½®
2. **åˆå¹¶æ›´æ–°**ï¼šæ›´æ–°å½“å‰å¯è§åˆ†ç±»çš„é…ç½®
3. **é€‰æ‹©æ€§ä¿å­˜**ï¼šåªä¿å­˜æœ‰è‡ªå®šä¹‰é…ç½®çš„åˆ†ç±»ï¼ˆæœ‰ `DisplayName` æˆ– `IsHidden`ï¼‰
4. **UTF8ç¼–ç **ï¼šæ”¯æŒä¸­æ–‡å­—ç¬¦

#### ä¸ºä»€ä¹ˆéœ€è¦é…ç½®åˆå¹¶ï¼Ÿ
- `categories` é›†åˆåœ¨ `RefreshCategoryDisplay()` ä¸­å·²ç»è¿‡æ»¤æ‰ `IsHidden = true` çš„åˆ†ç±»
- å¦‚æœç›´æ¥ä¿å­˜ `categories`ï¼Œä¼šä¸¢å¤±å·²éšè—åˆ†ç±»çš„é…ç½®
- å¿…é¡»å…ˆåŠ è½½ç°æœ‰é…ç½®ï¼Œå†åˆå¹¶æ›´æ–°

---

### å˜æ›´6: RefreshCategoryDisplay æ–¹æ³•ï¼ˆä»æ–‡ä»¶åŠ è½½é…ç½®ï¼‰

**æ–‡ä»¶**ï¼š`MainWindow.xaml.cs`
**ä½ç½®**ï¼šç¬¬ 8071-8196 è¡Œ

#### å…³é”®ä¿®æ”¹ç‚¹1ï¼šä»é…ç½®æ–‡ä»¶åŠ è½½ï¼ˆç¬¬ 8108-8142 è¡Œï¼‰

```csharp
// åŠ è½½æ˜¾ç¤ºé…ç½®ï¼ˆDisplayNameå’ŒIsHiddenï¼‰- ä»é…ç½®æ–‡ä»¶åŠ è½½è€Œéä»categoriesé›†åˆ
var categoriesWithConfig = new List<Category>();

// âœ… å…³é”®ä¿®æ”¹ï¼šä»é…ç½®æ–‡ä»¶åŠ è½½æ‰€æœ‰é…ç½®ï¼ˆåŒ…æ‹¬å·²éšè—çš„åˆ†ç±»é…ç½®ï¼‰
Dictionary<string, CategoryDisplayConfig>? savedConfig = null;
try
{
    var configPath = GetCategoryDisplayConfigPath();
    if (File.Exists(configPath))
    {
        var configJson = File.ReadAllText(configPath, System.Text.Encoding.UTF8);
        savedConfig = System.Text.Json.JsonSerializer.Deserialize<Dictionary<string, CategoryDisplayConfig>>(configJson);
        if (savedConfig != null)
        {
            Console.WriteLine($"[åˆ·æ–°] ä»é…ç½®æ–‡ä»¶åŠ è½½: {savedConfig.Count} ä¸ªåˆ†ç±»é…ç½®");
        }
    }
}
catch (Exception ex)
{
    Console.WriteLine($"[è­¦å‘Š] åŠ è½½åˆ†ç±»é…ç½®å¤±è´¥: {ex.Message}");
}

foreach (var cat in newCategories)
{
    // âœ… ä»é…ç½®æ–‡ä»¶åº”ç”¨DisplayNameå’ŒIsHidden
    if (savedConfig != null && savedConfig.TryGetValue(cat.Name, out var config))
    {
        cat.DisplayName = config.DisplayName;
        cat.IsHidden = config.IsHidden;
        Console.WriteLine($"[åˆ·æ–°] åº”ç”¨é…ç½®åˆ°åˆ†ç±» '{cat.Name}': DisplayName={config.DisplayName}, IsHidden={config.IsHidden}");
    }

    categoriesWithConfig.Add(cat);
}
```

#### è¯´æ˜
- **ä¿®æ”¹å‰**ï¼šä» `categories` é›†åˆä¸­æŸ¥æ‰¾å·²å­˜åœ¨çš„åˆ†ç±»ï¼Œå¤åˆ¶å…¶ `DisplayName` å’Œ `IsHidden`
- **ä¿®æ”¹å**ï¼šç›´æ¥ä»é…ç½®æ–‡ä»¶åŠ è½½
- **ä¸ºä»€ä¹ˆä¿®æ”¹**ï¼š`categories` é›†åˆå·²è¿‡æ»¤æ‰éšè—åˆ†ç±»ï¼Œä»ä¸­åŠ è½½ä¼šä¸¢å¤±éšè—çŠ¶æ€

#### å…³é”®ä¿®æ”¹ç‚¹2ï¼šç§»é™¤ InitializeDefaultCategories è°ƒç”¨ï¼ˆç¬¬ 8187-8196 è¡Œï¼‰

```csharp
Dispatcher.Invoke(() =>
{
    categories.Clear();
    foreach (var cat in visibleCategories)
    {
        categories.Add(cat);
    }

    // âœ… å·²åˆ é™¤ InitializeDefaultCategories() è°ƒç”¨
    // é»˜è®¤åˆ†ç±»å·²åœ¨ä¸Šé¢çš„é€»è¾‘ä¸­æ­£ç¡®å¤„ç†ï¼ˆåŒ…æ‹¬ä»é…ç½®æ–‡ä»¶åŠ è½½çš„ IsHidden çŠ¶æ€ï¼‰
    // ä¸å†éœ€è¦é‡æ–°åˆå§‹åŒ–ï¼Œé¿å…è¦†ç›– IsHidden çŠ¶æ€

    // æ¢å¤ä¹‹å‰é€‰ä¸­çš„åˆ†ç±»
    if (!string.IsNullOrEmpty(previousSelectedCategory))
    {
        var categoryToSelect = categories.FirstOrDefault(c => c.Name == previousSelectedCategory);
        if (categoryToSelect != null)
        {
            CategoryListBox.SelectedItem = categoryToSelect;
        }
    }
});
```

#### è¯´æ˜
- **ä¿®æ”¹å‰**ï¼šè°ƒç”¨ `InitializeDefaultCategories()` é‡æ–°æ·»åŠ é»˜è®¤åˆ†ç±»
- **ä¿®æ”¹å**ï¼šåˆ é™¤è¯¥è°ƒç”¨
- **ä¸ºä»€ä¹ˆä¿®æ”¹**ï¼š`InitializeDefaultCategories()` ä¼šé‡æ–°æ·»åŠ é»˜è®¤åˆ†ç±»ï¼ˆé¢éƒ¨ã€äººç‰©ã€æ­¦å™¨ç­‰ï¼‰ä¸” `IsHidden` é»˜è®¤ä¸º `false`ï¼Œè¦†ç›–äº†ä»é…ç½®æ–‡ä»¶åŠ è½½çš„éšè—çŠ¶æ€

---

### å˜æ›´7: RenameCategoryButton_Click æ–¹æ³•ï¼ˆé‡å‘½ååˆ†ç±»ï¼‰

**æ–‡ä»¶**ï¼š`MainWindow.xaml.cs`
**ä½ç½®**ï¼šç¬¬ 9670-9730 è¡Œ

#### å®Œæ•´ä»£ç 
```csharp
private void RenameCategoryButton_Click(object sender, RoutedEventArgs e)
{
    if (CategoryListBox.SelectedItem is Category selectedCategory)
    {
        // è·å–å½“å‰çš„æ˜¾ç¤ºåç§°ï¼ˆå¦‚æœæ²¡æœ‰DisplayNameåˆ™æ˜¾ç¤ºNameï¼‰
        string currentDisplayName = selectedCategory.DisplayText;

        // å¼¹å‡ºè¾“å…¥å¯¹è¯æ¡†
        string newDisplayName = ShowInputDialog(
            "è®¾ç½®åˆ†ç±»æ˜¾ç¤ºåç§°ï¼ˆä»…ä¿®æ”¹æ˜¾ç¤ºï¼Œä¸å½±å“æ ‡ç­¾ï¼‰:",
            "é‡å‘½ååˆ†ç±»",
            currentDisplayName
        );

        if (string.IsNullOrWhiteSpace(newDisplayName))
        {
            // ç”¨æˆ·å–æ¶ˆæˆ–è¾“å…¥ä¸ºç©º
            return;
        }

        // å¦‚æœæ–°åç§°ç­‰äºæ ‡ç­¾åï¼Œæ¸…ç©ºDisplayNameï¼ˆæ¢å¤é»˜è®¤ï¼‰
        if (newDisplayName.Equals(selectedCategory.Name, StringComparison.OrdinalIgnoreCase))
        {
            selectedCategory.DisplayName = null;
            Console.WriteLine($"[é‡å‘½å] æ¸…ç©ºåˆ†ç±» '{selectedCategory.Name}' çš„æ˜¾ç¤ºåç§°ï¼Œæ¢å¤é»˜è®¤");
        }
        else
        {
            selectedCategory.DisplayName = newDisplayName;
            Console.WriteLine($"[é‡å‘½å] è®¾ç½®åˆ†ç±» '{selectedCategory.Name}' çš„æ˜¾ç¤ºåç§°ä¸º '{newDisplayName}'");
        }

        // ä¿å­˜é…ç½®
        SaveCategoryDisplayConfig();

        // åˆ·æ–°åˆ†ç±»æ˜¾ç¤º
        RefreshCategoryDisplay();

        // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
        ShowCustomMessageBox(
            $"åˆ†ç±»æ˜¾ç¤ºåç§°å·²æ›´æ–°\n\næ ‡ç­¾åï¼ˆç”¨äºMODå…³è”ï¼‰ï¼š{selectedCategory.Name}\næ˜¾ç¤ºåï¼ˆä»…UIæ˜¾ç¤ºï¼‰ï¼š{selectedCategory.DisplayText}\n\næ³¨æ„ï¼šMODåŒºçš„æ ‡ç­¾åç§°ä¸å˜ï¼Œä»ä¸º '{selectedCategory.Name}'",
            "é‡å‘½åæˆåŠŸ",
            MessageBoxButton.OK,
            MessageBoxImage.Information
        );
    }
}
```

#### è¯´æ˜
- **åªä¿®æ”¹ DisplayName**ï¼šä¸ä¿®æ”¹ `Name`ï¼ˆæ ‡ç­¾åï¼‰
- **æ¢å¤é»˜è®¤**ï¼šå¦‚æœè¾“å…¥åç§°ç­‰äºæ ‡ç­¾åï¼Œæ¸…ç©º `DisplayName`
- **ä¸å½±å“MOD**ï¼šMODçš„ `Type` å’Œ `Categories` å­—æ®µä¿æŒä¸å˜
- **æç¤ºä¿¡æ¯**ï¼šæ˜ç¡®å‘ŠçŸ¥ç”¨æˆ·æ ‡ç­¾åä¸å˜

---

### å˜æ›´8: DeleteCategoryButton_Click æ–¹æ³•ï¼ˆè½¯åˆ é™¤åˆ†ç±»ï¼‰

**æ–‡ä»¶**ï¼š`MainWindow.xaml.cs`
**ä½ç½®**ï¼šç¬¬ 8255-8382 è¡Œ

#### å®Œæ•´ä»£ç 
```csharp
private async void DeleteCategoryButton_Click(object sender, RoutedEventArgs e)
{
    if (CategoryListBox.SelectedItems.Count == 0)
    {
        ShowCustomMessageBox("è¯·å…ˆé€‰æ‹©è¦åˆ é™¤çš„åˆ†ç±»", "æç¤º", MessageBoxButton.OK, MessageBoxImage.Information);
        return;
    }

    // è·å–æ‰€é€‰åˆ†ç±»
    var categoriesToHide = CategoryListBox.SelectedItems.Cast<Category>().ToList();

    // æ£€æŸ¥æ˜¯å¦æœ‰MODä½¿ç”¨è¿™äº›åˆ†ç±»
    var allMods = GetAllModsForCurrentGame();
    int affectedModCount = 0;
    foreach (var category in categoriesToHide)
    {
        var modsInCategory = allMods.Where(mod =>
            mod.Type == category.Name ||
            (mod.Categories != null && mod.Categories.Contains(category.Name))
        ).ToList();

        affectedModCount += modsInCategory.Count;
    }

    // æ„å»ºç¡®è®¤æ¶ˆæ¯
    string confirmMessage;
    if (affectedModCount > 0)
    {
        confirmMessage = $"ç¡®å®šè¦åˆ é™¤é€‰ä¸­çš„ {categoriesToHide.Count} ä¸ªåˆ†ç±»å—ï¼Ÿ\n\n";
        confirmMessage += $"è¿™äº›åˆ†ç±»ä¸‹æœ‰ {affectedModCount} ä¸ªMODï¼Œå°†è‡ªåŠ¨ç§»åŠ¨åˆ°"æœªåˆ†ç±»"ã€‚\n\n";
        confirmMessage += "åˆ†ç±»å°†è¢«éšè—ï¼ˆä¸ä¼šçœŸåˆ é™¤ï¼‰ï¼Œå¦‚æœMODé‡æ–°ä½¿ç”¨è¯¥åˆ†ç±»ï¼Œå®ƒä¼šå†æ¬¡æ˜¾ç¤ºã€‚";
    }
    else
    {
        confirmMessage = $"ç¡®å®šè¦åˆ é™¤é€‰ä¸­çš„ {categoriesToHide.Count} ä¸ªåˆ†ç±»å—ï¼Ÿ\n\n";
        confirmMessage += "åˆ†ç±»å°†è¢«éšè—ï¼ˆä¸ä¼šçœŸåˆ é™¤ï¼‰ï¼Œå¦‚æœMODé‡æ–°ä½¿ç”¨è¯¥åˆ†ç±»ï¼Œå®ƒä¼šå†æ¬¡æ˜¾ç¤ºã€‚";
    }

    var result = ShowCustomMessageBox(
        confirmMessage,
        "ç¡®è®¤åˆ é™¤",
        MessageBoxButton.YesNo,
        MessageBoxImage.Question
    );

    if (result == MessageBoxResult.Yes)
    {
        try
        {
            // æ­¥éª¤1ï¼šå°†ä½¿ç”¨è¿™äº›åˆ†ç±»çš„ MOD ç§»åŠ¨åˆ°"æœªåˆ†ç±»"
            int movedModCount = 0;
            foreach (var category in categoriesToHide)
            {
                var affectedMods = allMods.Where(mod =>
                    mod.Type == category.Name ||
                    (mod.Categories != null && mod.Categories.Contains(category.Name))
                ).ToList();

                if (affectedMods.Any())
                {
                    Console.WriteLine($"[åˆ é™¤] åˆ†ç±» '{category.Name}' ä¸‹æœ‰ {affectedMods.Count} ä¸ªMODï¼Œå°†ç§»åŠ¨åˆ°"æœªåˆ†ç±»"");

                    foreach (var mod in affectedMods)
                    {
                        // æ›´æ–° Type å­—æ®µ
                        if (mod.Type == category.Name)
                        {
                            mod.Type = "æœªåˆ†ç±»";
                            Console.WriteLine($"[åˆ é™¤] MOD '{mod.Name}' çš„ Type ä» '{category.Name}' æ”¹ä¸º 'æœªåˆ†ç±»'");
                        }

                        // æ›´æ–° Categories å­—æ®µ
                        if (mod.Categories != null && mod.Categories.Contains(category.Name))
                        {
                            // ç§»é™¤å½“å‰åˆ†ç±»
                            mod.Categories = mod.Categories
                                .Where(c => c != category.Name)
                                .ToList();

                            // å¦‚æœç§»é™¤åä¸ºç©ºï¼Œæ·»åŠ "æœªåˆ†ç±»"
                            if (!mod.Categories.Any())
                            {
                                mod.Categories.Add("æœªåˆ†ç±»");
                            }

                            Console.WriteLine($"[åˆ é™¤] MOD '{mod.Name}' çš„ Categories å·²æ›´æ–°: {string.Join(", ", mod.Categories)}");
                        }

                        // é€šçŸ¥å±æ€§å˜æ›´ï¼ˆè§¦å‘UIæ›´æ–°ï¼‰
                        mod.OnPropertyChanged(nameof(mod.Type));
                        mod.OnPropertyChanged(nameof(mod.Categories));
                        movedModCount++;
                    }
                }
            }

            // æ­¥éª¤2ï¼šä¿å­˜ MOD æ•°æ®åˆ°é…ç½®æ–‡ä»¶
            if (movedModCount > 0)
            {
                Console.WriteLine($"[åˆ é™¤] å…±ç§»åŠ¨ {movedModCount} ä¸ªMODï¼Œä¿å­˜åˆ° ModService");
                await SaveModsToModServiceAsync();
            }

            // æ­¥éª¤3ï¼šè®¾ç½® IsHidden = trueï¼ˆè½¯åˆ é™¤ï¼‰
            foreach (var category in categoriesToHide)
            {
                category.IsHidden = true;
                Console.WriteLine($"[åˆ é™¤] åˆ†ç±» '{category.Name}' å·²è®¾ç½®ä¸ºéšè—");
            }

            // æ­¥éª¤4ï¼šä¿å­˜åˆ†ç±»æ˜¾ç¤ºé…ç½®
            SaveCategoryDisplayConfig();

            // æ­¥éª¤5ï¼šåˆ·æ–°åˆ†ç±»æ˜¾ç¤ºï¼ˆä¼šè‡ªåŠ¨è¿‡æ»¤æ‰IsHidden=trueçš„åˆ†ç±»ï¼‰
            RefreshCategoryDisplay();

            // æ­¥éª¤6ï¼šæ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
            string successMessage = $"å·²åˆ é™¤ {categoriesToHide.Count} ä¸ªåˆ†ç±»";
            if (movedModCount > 0)
            {
                successMessage += $"\nå·²å°† {movedModCount} ä¸ªMODç§»åŠ¨åˆ°"æœªåˆ†ç±»"";
            }
            ShowCustomMessageBox(successMessage, "åˆ é™¤æˆåŠŸ", MessageBoxButton.OK, MessageBoxImage.Information);
        }
        catch (Exception ex)
        {
            Console.WriteLine($"[é”™è¯¯] åˆ é™¤åˆ†ç±»å¤±è´¥: {ex.Message}\n{ex.StackTrace}");
            ShowCustomMessageBox($"åˆ é™¤åˆ†ç±»å¤±è´¥: {ex.Message}", "é”™è¯¯", MessageBoxButton.OK, MessageBoxImage.Error);
        }
    }
}
```

#### åˆ é™¤æµç¨‹
1. **æ£€æŸ¥MOD**ï¼šç»Ÿè®¡ä½¿ç”¨è¯¥åˆ†ç±»çš„MODæ•°é‡
2. **ç¡®è®¤å¯¹è¯æ¡†**ï¼šæç¤ºç”¨æˆ·å°†æœ‰å¤šå°‘MODè¢«ç§»åŠ¨
3. **ç§»åŠ¨MOD**ï¼šå°†MODçš„ `Type` å’Œ `Categories` æ”¹ä¸º"æœªåˆ†ç±»"
4. **ä¿å­˜MODæ•°æ®**ï¼šè°ƒç”¨ `SaveModsToModServiceAsync()`
5. **è®¾ç½®éšè—**ï¼š`IsHidden = true`
6. **ä¿å­˜é…ç½®**ï¼šè°ƒç”¨ `SaveCategoryDisplayConfig()`
7. **åˆ·æ–°UI**ï¼šè°ƒç”¨ `RefreshCategoryDisplay()`

#### æ™ºèƒ½æ˜¾ç¤ºé€»è¾‘
åœ¨ `RefreshCategoryDisplay()` ä¸­å®ç°ï¼š
```csharp
// å¦‚æœæŸä¸ªéšè—åˆ†ç±»æœ‰MODåœ¨ä½¿ç”¨ï¼Œè‡ªåŠ¨æ˜¾ç¤ºè¯¥åˆ†ç±»
if (cat.IsHidden && cat.Count > 0)
{
    Console.WriteLine($"[æ™ºèƒ½æ˜¾ç¤º] åˆ†ç±» '{cat.Name}' è™½ç„¶å·²éšè—ï¼Œä½†ä»æœ‰ {cat.Count} ä¸ªMODä½¿ç”¨ï¼Œè‡ªåŠ¨æ˜¾ç¤º");
    cat.IsHidden = false;  // ä¸´æ—¶å–æ¶ˆéšè—
}

// è¿‡æ»¤æ‰ä»ç„¶IsHidden=trueçš„åˆ†ç±»
var visibleCategories = categoriesWithConfig.Where(c => !c.IsHidden).ToList();
```

---

### å˜æ›´9: MoveToCategorySubMenuItem æ˜¾ç¤ºæ ¼å¼

**æ–‡ä»¶**ï¼š`MainWindow.xaml.cs`
**ä½ç½®**ï¼šç¬¬ 9081-9116 è¡Œ

#### å…³é”®ä»£ç 
```csharp
foreach (var category in availableCategories)
{
    // æ„å»ºèœå•æ˜¾ç¤ºæ–‡æœ¬ï¼šæ ‡ç­¾åï¼ˆæ˜¾ç¤ºåï¼‰æˆ– æ ‡ç­¾å
    string menuHeader;
    if (!string.IsNullOrEmpty(category.DisplayName))
    {
        menuHeader = $"{category.Name}ï¼ˆ{category.DisplayName}ï¼‰";
    }
    else
    {
        menuHeader = category.Name;
    }

    var categoryMenuItem = new MenuItem
    {
        Header = menuHeader,
        Style = (Style)FindResource("DarkMenuItem"),
        Tag = rightClickedMod
    };

    // æ·»åŠ å›¾æ ‡
    var icon = new Image
    {
        Source = new BitmapImage(new Uri("pack://application:,,,/tag_icon.png")),
        Width = 16,
        Height = 16
    };
    categoryMenuItem.Icon = icon;

    // ç‚¹å‡»äº‹ä»¶ï¼ˆä½¿ç”¨åŸå§‹Nameï¼Œä¸æ˜¯DisplayNameï¼‰
    var categoryName = category.Name;
    categoryMenuItem.Click += (s, args) => MoveToCategorySubMenuItem_Click(s, args, categoryName);

    moveToCategoryMenuItem.Items.Add(categoryMenuItem);
}
```

#### è¯´æ˜
- **æ˜¾ç¤ºæ ¼å¼**ï¼šæœ‰ `DisplayName` æ—¶æ˜¾ç¤º "æ ‡ç­¾åï¼ˆæ˜¾ç¤ºåï¼‰"ï¼Œå¦åˆ™åªæ˜¾ç¤º "æ ‡ç­¾å"
- **é€»è¾‘ä½¿ç”¨ Name**ï¼šç§»åŠ¨MODæ—¶ä½¿ç”¨åŸå§‹ `Name`ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§

---

### å˜æ›´10: RefreshButton_Click ç§»é™¤å†—ä½™æ¢å¤é€»è¾‘

**æ–‡ä»¶**ï¼š`MainWindow.xaml.cs`
**ä½ç½®**ï¼šç¬¬ 4519-4525 è¡Œ

#### ä¿®æ”¹å‰ï¼ˆå·²åˆ é™¤çš„ä»£ç ï¼‰
```csharp
// ä»ModServiceæ¢å¤è‡ªå®šä¹‰åç§°ã€æè¿°ã€åˆ†ç±»ç­‰
if (_modService != null)
{
    Console.WriteLine("[DEBUG] ä»ModServiceæ¢å¤è‡ªå®šä¹‰åç§°å’Œæè¿°");

    foreach (var mod in allMods)
    {
        // âŒ é—®é¢˜ï¼šç¼ºå°‘ m.DisplayName == mod.Name æ¡ä»¶
        var modInfo = _modService.Mods.FirstOrDefault(m =>
            m.Name == mod.RealName ||
            (!string.IsNullOrEmpty(m.PreviewImagePath) &&
             !string.IsNullOrEmpty(mod.PreviewImagePath) &&
             TryCompareImagePaths(m.PreviewImagePath, mod.PreviewImagePath)));

        if (modInfo != null)
        {
            // ... å…¶ä»–å­—æ®µæ¢å¤ ...

            // âŒ å¦‚æœæ‰¾ä¸åˆ°modInfoï¼Œä½¿ç”¨é»˜è®¤å€¼è¦†ç›–ç”¨æˆ·åˆ†ç±»
            mod.Categories = modInfo.Categories?.ToList() ?? new List<string> { "æœªåˆ†ç±»" };
        }
    }
}
```

#### ä¿®æ”¹åï¼ˆç¬¬ 4519-4525 è¡Œï¼‰
```csharp
// âœ… å·²ç§»é™¤å†—ä½™çš„ç¬¬ä¸‰æ¬¡æ•°æ®æ¢å¤é€»è¾‘
// InitializeModsForGame() æ–¹æ³•å†…éƒ¨å·²ç»ä» ModService æ¢å¤äº†æ‰€æœ‰æ•°æ®ï¼ˆDisplayNameã€Descriptionã€Categories ç­‰ï¼‰
// ä¸éœ€è¦åœ¨è¿™é‡Œé‡å¤æ¢å¤ï¼Œé¿å…å› æŸ¥æ‰¾é€»è¾‘ä¸ä¸€è‡´å¯¼è‡´æ•°æ®ä¸¢å¤±
//
// ä¿®å¤ BUG: ä¹‹å‰è¿™é‡Œçš„æŸ¥æ‰¾é€»è¾‘ç¼ºå°‘ m.DisplayName == mod.Name æ¡ä»¶ï¼Œ
// å¯¼è‡´æ‰¾ä¸åˆ° modInfo æ—¶ä½¿ç”¨é»˜è®¤å€¼ new List<string> { "æœªåˆ†ç±»" } è¦†ç›–äº†ç”¨æˆ·è‡ªå®šä¹‰çš„åˆ†ç±»
Console.WriteLine("[DEBUG] MODæ•°æ®å·²åœ¨ InitializeModsForGame ä¸­ä» ModService å®Œæ•´æ¢å¤ï¼Œè·³è¿‡å†—ä½™æ¢å¤");
```

#### è¯´æ˜
- **é—®é¢˜æ ¹æº**ï¼š
  1. ä¿å­˜æ—¶çš„æŸ¥è¯¢æ¡ä»¶ï¼š`m.Name == mod.RealName || m.DisplayName == mod.Name || å›¾ç‰‡å¯¹æ¯”`
  2. æ¢å¤æ—¶çš„æŸ¥è¯¢æ¡ä»¶ï¼š`m.Name == mod.RealName || å›¾ç‰‡å¯¹æ¯”`ï¼ˆç¼ºå°‘ `DisplayName` æ¡ä»¶ï¼‰
  3. æŸ¥è¯¢ä¸ä¸€è‡´å¯¼è‡´æ‰¾ä¸åˆ° `modInfo`ï¼Œä½¿ç”¨é»˜è®¤å€¼ `new List<string> { "æœªåˆ†ç±»" }` è¦†ç›–ç”¨æˆ·åˆ†ç±»

- **è§£å†³æ–¹æ¡ˆ**ï¼š
  - `InitializeModsForGame()` å†…éƒ¨å·²ç»æ­£ç¡®æ¢å¤æ‰€æœ‰æ•°æ®
  - åˆ é™¤å†—ä½™çš„ç¬¬ä¸‰æ¬¡æ¢å¤ï¼Œé¿å…æ•°æ®è¢«è¦†ç›–

---

## é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### é—®é¢˜1ï¼šè½¯åˆ é™¤ååˆ†ç±»ä»ç„¶æ˜¾ç¤º

#### ç°è±¡
ç‚¹å‡»åˆ é™¤åˆ†ç±»ï¼Œæç¤ºæˆåŠŸï¼Œä½†å·¦ä¾§åˆ†ç±»åˆ—è¡¨ä¸­ä»ç„¶æ˜¾ç¤ºè¯¥åˆ†ç±»

#### åŸå› 
`SaveCategoryDisplayConfig()` åªä¿å­˜ `categories` é›†åˆä¸­çš„åˆ†ç±»ï¼Œè€Œ `RefreshCategoryDisplay()` å·²ç»è¿‡æ»¤æ‰äº† `IsHidden = true` çš„åˆ†ç±»ï¼Œå¯¼è‡´é…ç½®æ–‡ä»¶ä¸­æ²¡æœ‰ä¿å­˜éšè—çŠ¶æ€

#### è§£å†³æ–¹æ¡ˆ
å®ç°é…ç½®åˆå¹¶ç­–ç•¥ï¼ˆæ–¹æ¡ˆAï¼‰ï¼š
1. ä¿å­˜å‰å…ˆåŠ è½½ç°æœ‰é…ç½®æ–‡ä»¶
2. å°†å½“å‰å¯è§åˆ†ç±»çš„é…ç½®åˆå¹¶åˆ°ç°æœ‰é…ç½®ä¸­
3. ä¿å­˜åˆå¹¶åçš„å®Œæ•´é…ç½®ï¼ˆåŒ…æ‹¬å·²éšè—åˆ†ç±»ï¼‰

#### ä»£ç ä½ç½®
`MainWindow.xaml.cs` ç¬¬ 10514-10575 è¡Œ

---

### é—®é¢˜2ï¼šRefreshCategoryDisplay ä»å†…å­˜åŠ è½½é…ç½®

#### ç°è±¡
å³ä½¿é…ç½®æ–‡ä»¶æ­£ç¡®ä¿å­˜äº† `IsHidden = true`ï¼Œåˆ·æ–°ååˆ†ç±»ä»ç„¶æ˜¾ç¤º

#### åŸå› 
`RefreshCategoryDisplay()` ä» `categories` é›†åˆä¸­æŸ¥æ‰¾å·²å­˜åœ¨åˆ†ç±»ï¼Œå¤åˆ¶å…¶é…ç½®ï¼š
```csharp
var existingCat = categories.FirstOrDefault(c => c.Name == cat.Name);
if (existingCat != null) {
    cat.IsHidden = existingCat.IsHidden;  // âŒ éšè—åˆ†ç±»ä¸åœ¨é›†åˆä¸­
}
```

`categories` é›†åˆå·²è¿‡æ»¤æ‰éšè—åˆ†ç±»ï¼Œæ‰€ä»¥æ–°åˆ†ç±»çš„ `IsHidden` ä¿æŒé»˜è®¤å€¼ `false`

#### è§£å†³æ–¹æ¡ˆ
ç›´æ¥ä»é…ç½®æ–‡ä»¶åŠ è½½ï¼Œä¸ä¾èµ–å†…å­˜é›†åˆï¼š
```csharp
var savedConfig = LoadFromConfigFile();
if (savedConfig.TryGetValue(cat.Name, out var config)) {
    cat.IsHidden = config.IsHidden;  // âœ… ä»æ–‡ä»¶åŠ è½½
}
```

#### ä»£ç ä½ç½®
`MainWindow.xaml.cs` ç¬¬ 8108-8142 è¡Œ

---

### é—®é¢˜3ï¼šé»˜è®¤åˆ†ç±»æ— æ³•éšè—

#### ç°è±¡
è‡ªå®šä¹‰åˆ†ç±»ï¼ˆå¦‚"1"ã€"2"ï¼‰å¯ä»¥æˆåŠŸéšè—ï¼Œä½†é»˜è®¤åˆ†ç±»ï¼ˆé¢éƒ¨ã€äººç‰©ã€æ­¦å™¨ç­‰ï¼‰åˆ é™¤åä»ç„¶æ˜¾ç¤º

#### åŸå› 
`RefreshCategoryDisplay()` åœ¨æ›´æ–° `categories` é›†åˆåè°ƒç”¨äº† `InitializeDefaultCategories()`ï¼š
```csharp
Dispatcher.Invoke(() => {
    categories.Clear();
    foreach (var cat in visibleCategories) {
        categories.Add(cat);  // âœ… æ­£ç¡®è¿‡æ»¤äº†éšè—åˆ†ç±»
    }

    InitializeDefaultCategories();  // âŒ é‡æ–°æ·»åŠ é»˜è®¤åˆ†ç±»ï¼ŒIsHidden = false
});
```

`InitializeDefaultCategories()` æ£€æŸ¥é»˜è®¤åˆ†ç±»æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨åˆ™æ·»åŠ ï¼ˆ`IsHidden` é»˜è®¤ä¸º `false`ï¼‰ï¼š
```csharp
var defaultTypes = new[] { "é¢éƒ¨", "äººç‰©", "æ­¦å™¨", "æœè£…", ... };
foreach (var type in defaultTypes) {
    if (!categories.Any(c => c.Name == type)) {
        categories.Add(new Category { Name = type, Count = count });
        // âŒ IsHidden é»˜è®¤ä¸º false
    }
}
```

#### è§£å†³æ–¹æ¡ˆ
åˆ é™¤ `RefreshCategoryDisplay()` ä¸­çš„ `InitializeDefaultCategories()` è°ƒç”¨ã€‚é»˜è®¤åˆ†ç±»å·²ç»åœ¨å‰é¢çš„é€»è¾‘ä¸­å¤„ç†ï¼ˆä»é…ç½®æ–‡ä»¶åŠ è½½äº† `IsHidden` çŠ¶æ€ï¼‰ï¼Œä¸éœ€è¦é‡å¤åˆå§‹åŒ–ã€‚

#### ä»£ç ä½ç½®
`MainWindow.xaml.cs` ç¬¬ 8187-8196 è¡Œï¼ˆå·²åˆ é™¤è¯¥è°ƒç”¨ï¼‰

---

### é—®é¢˜4ï¼šåˆ·æ–°åMODåˆ†ç±»è¢«é‡ç½®

#### ç°è±¡
1. å°†MODç§»åŠ¨åˆ°è‡ªå®šä¹‰åˆ†ç±»"2"
2. ç‚¹å‡»åˆ·æ–°æŒ‰é’®
3. MODå›åˆ°åŸåˆ†ç±»ï¼Œè‡ªå®šä¹‰åˆ†ç±»"2"æ¶ˆå¤±

#### åŸå› 
`RefreshButton_Click()` ä¸­æœ‰ä¸‰æ¬¡æ•°æ®æ¢å¤ï¼Œä¸”æŸ¥è¯¢é€»è¾‘ä¸ä¸€è‡´ï¼š

**ç¬¬ä¸€æ¬¡ï¼ˆä¿å­˜ï¼Œç¬¬ 4472-4476 è¡Œï¼‰ï¼š**
```csharp
var modInfo = _modService.Mods.FirstOrDefault(m =>
    m.Name == mod.RealName ||
    m.DisplayName == mod.Name ||  // âœ… åŒ…å«æ­¤æ¡ä»¶
    (TryCompareImagePaths(...)));
```

**ç¬¬äºŒæ¬¡ï¼ˆInitializeModsForGame æ¢å¤ï¼‰ï¼š**
æ­£ç¡®æ¢å¤æ‰€æœ‰æ•°æ® âœ…

**ç¬¬ä¸‰æ¬¡ï¼ˆå†—ä½™æ¢å¤ï¼Œç¬¬ 4527-4530 è¡Œï¼‰ï¼š**
```csharp
var modInfo = _modService.Mods.FirstOrDefault(m =>
    m.Name == mod.RealName ||
    // âŒ ç¼ºå°‘ m.DisplayName == mod.Name æ¡ä»¶
    (TryCompareImagePaths(...)));

if (modInfo != null) {
    mod.Categories = modInfo.Categories?.ToList() ?? new List<string> { "æœªåˆ†ç±»" };
    // âŒ æ‰¾ä¸åˆ°modInfoæ—¶ä½¿ç”¨é»˜è®¤å€¼ï¼Œè¦†ç›–ç”¨æˆ·åˆ†ç±»
}
```

**æ‰§è¡Œæµç¨‹ï¼š**
1. ä¿å­˜æ—¶èƒ½æ‰¾åˆ° `modInfo`ï¼ˆé€šè¿‡ `DisplayName` åŒ¹é…ï¼‰
2. `InitializeModsForGame()` æ­£ç¡®æ¢å¤
3. ç¬¬ä¸‰æ¬¡æ¢å¤æ—¶æ‰¾ä¸åˆ° `modInfo`ï¼ˆç¼ºå°‘ `DisplayName` æ¡ä»¶ï¼‰
4. ä½¿ç”¨ `new List<string> { "æœªåˆ†ç±»" }` è¦†ç›–ç”¨æˆ·åˆ†ç±»

#### è§£å†³æ–¹æ¡ˆ
åˆ é™¤ç¬¬ä¸‰æ¬¡æ¢å¤é€»è¾‘ï¼Œä¾èµ– `InitializeModsForGame()` çš„ç»Ÿä¸€æ¢å¤ã€‚

#### ä»£ç ä½ç½®
`MainWindow.xaml.cs` ç¬¬ 4519-4545 è¡Œï¼ˆå·²åˆ é™¤ï¼Œæ›¿æ¢ä¸ºæ³¨é‡Šè¯´æ˜ï¼‰

---

## æµ‹è¯•éªŒè¯

### æµ‹è¯•ç¯å¢ƒ
- **æ“ä½œç³»ç»Ÿ**ï¼šWindows 10/11
- **ç¼–è¯‘å™¨**ï¼šVisual Studio 2022
- **.NET ç‰ˆæœ¬**ï¼š.NET 8.0
- **æ¸¸æˆ**ï¼šå‰‘æ˜Ÿã€é»‘ç¥è¯æ‚Ÿç©ºã€æ˜æœ«æ— åŒ

### æµ‹è¯•ç”¨ä¾‹

#### æµ‹è¯•1ï¼šé‡å‘½ååˆ†ç±»
**æ­¥éª¤ï¼š**
1. å³é”®ç‚¹å‡»åˆ†ç±»"é¢éƒ¨"
2. é€‰æ‹©"é‡å‘½ååˆ†ç±»"
3. è¾“å…¥"é¢éƒ¨MOD"
4. ç¡®è®¤

**é¢„æœŸç»“æœï¼š**
- å·¦ä¾§åˆ†ç±»åˆ—è¡¨æ˜¾ç¤º"é¢éƒ¨MOD"
- å³ä¾§MODæ ‡ç­¾ä»æ˜¾ç¤º"é¢éƒ¨"
- å³é”®èœå•æ˜¾ç¤º"é¢éƒ¨ï¼ˆé¢éƒ¨MODï¼‰"
- é…ç½®æ–‡ä»¶ä¸­ä¿å­˜ `"é¢éƒ¨": {"DisplayName": "é¢éƒ¨MOD", "IsHidden": false}`

**éªŒè¯ç‚¹ï¼š**
- [ ] UIæ˜¾ç¤ºæ­£ç¡®
- [ ] MODæ ‡ç­¾æœªå˜
- [ ] é…ç½®æŒä¹…åŒ–
- [ ] åˆ·æ–°åä¿æŒ

---

#### æµ‹è¯•2ï¼šæ¢å¤é»˜è®¤åç§°
**æ­¥éª¤ï¼š**
1. å³é”®ç‚¹å‡»å·²é‡å‘½åçš„åˆ†ç±»"é¢éƒ¨MOD"
2. é€‰æ‹©"é‡å‘½ååˆ†ç±»"
3. è¾“å…¥"é¢éƒ¨"ï¼ˆç­‰äºæ ‡ç­¾åï¼‰
4. ç¡®è®¤

**é¢„æœŸç»“æœï¼š**
- å·¦ä¾§åˆ†ç±»åˆ—è¡¨æ˜¾ç¤º"é¢éƒ¨"
- `DisplayName` å­—æ®µä¸º `null`
- é…ç½®æ–‡ä»¶ä¸­ç§»é™¤è¯¥åˆ†ç±»çš„é…ç½®é¡¹

**éªŒè¯ç‚¹ï¼š**
- [ ] UIæ¢å¤é»˜è®¤
- [ ] é…ç½®æ–‡ä»¶æ›´æ–°

---

#### æµ‹è¯•3ï¼šåˆ é™¤ç©ºåˆ†ç±»
**æ­¥éª¤ï¼š**
1. åˆ›å»ºæ–°åˆ†ç±»"æµ‹è¯•åˆ†ç±»"ï¼ˆæ— MODï¼‰
2. å³é”®ç‚¹å‡»"æµ‹è¯•åˆ†ç±»"
3. é€‰æ‹©"åˆ é™¤åˆ†ç±»"
4. ç¡®è®¤

**é¢„æœŸç»“æœï¼š**
- åˆ†ç±»ä»åˆ—è¡¨ä¸­æ¶ˆå¤±
- é…ç½®æ–‡ä»¶ä¸­ `"æµ‹è¯•åˆ†ç±»": {"DisplayName": null, "IsHidden": true}`
- åˆ·æ–°åä»ä¸æ˜¾ç¤º

**éªŒè¯ç‚¹ï¼š**
- [ ] UIç«‹å³éšè—
- [ ] é…ç½®æŒä¹…åŒ–
- [ ] åˆ·æ–°åä»éšè—

---

#### æµ‹è¯•4ï¼šåˆ é™¤æœ‰MODçš„åˆ†ç±»
**æ­¥éª¤ï¼š**
1. åˆ›å»ºåˆ†ç±»"è‡ªå®šä¹‰åˆ†ç±»"
2. ç§»åŠ¨3ä¸ªMODåˆ°"è‡ªå®šä¹‰åˆ†ç±»"
3. å³é”®ç‚¹å‡»"è‡ªå®šä¹‰åˆ†ç±»"
4. é€‰æ‹©"åˆ é™¤åˆ†ç±»"
5. ç¡®è®¤å¯¹è¯æ¡†ï¼ˆæç¤º3ä¸ªMODå°†ç§»åŠ¨åˆ°æœªåˆ†ç±»ï¼‰

**é¢„æœŸç»“æœï¼š**
- 3ä¸ªMODç§»åŠ¨åˆ°"æœªåˆ†ç±»"
- MODçš„ `Type` å’Œ `Categories` å­—æ®µæ›´æ–°
- åˆ†ç±»ä»åˆ—è¡¨ä¸­æ¶ˆå¤±
- ModServiceé…ç½®æ–‡ä»¶æ›´æ–°

**éªŒè¯ç‚¹ï¼š**
- [ ] MODæˆåŠŸç§»åŠ¨
- [ ] MODæ•°æ®æŒä¹…åŒ–
- [ ] åˆ†ç±»éšè—
- [ ] åˆ·æ–°åMODä»åœ¨æœªåˆ†ç±»

---

#### æµ‹è¯•5ï¼šåˆ é™¤é»˜è®¤åˆ†ç±»
**æ­¥éª¤ï¼š**
1. å³é”®ç‚¹å‡»é»˜è®¤åˆ†ç±»"é¢éƒ¨"
2. é€‰æ‹©"åˆ é™¤åˆ†ç±»"
3. ç¡®è®¤

**é¢„æœŸç»“æœï¼š**
- åˆ†ç±»"é¢éƒ¨"ä»åˆ—è¡¨ä¸­æ¶ˆå¤±
- é…ç½®æ–‡ä»¶ä¸­ `"é¢éƒ¨": {"DisplayName": null, "IsHidden": true}`

**éªŒè¯ç‚¹ï¼š**
- [ ] é»˜è®¤åˆ†ç±»å¯ä»¥éšè—
- [ ] åˆ·æ–°åä»éšè—

---

#### æµ‹è¯•6ï¼šæ™ºèƒ½æ˜¾ç¤ºéšè—åˆ†ç±»
**æ­¥éª¤ï¼š**
1. åˆ é™¤åˆ†ç±»"æ­¦å™¨"ï¼ˆè®¾ç½® `IsHidden = true`ï¼‰
2. æ‰‹åŠ¨ç¼–è¾‘MODé…ç½®æ–‡ä»¶ï¼Œæ·»åŠ  `"Categories": ["æ­¦å™¨"]`
3. åˆ·æ–°åˆ†ç±»æ˜¾ç¤º

**é¢„æœŸç»“æœï¼š**
- åˆ†ç±»"æ­¦å™¨"è‡ªåŠ¨æ˜¾ç¤ºåœ¨åˆ—è¡¨ä¸­
- é…ç½®æ–‡ä»¶ä¸­ä»ä¿ç•™ `"æ­¦å™¨": {"IsHidden": true}`
- æ§åˆ¶å°è¾“å‡ºæ™ºèƒ½æ˜¾ç¤ºæ—¥å¿—

**éªŒè¯ç‚¹ï¼š**
- [ ] éšè—åˆ†ç±»è‡ªåŠ¨æ˜¾ç¤º
- [ ] é…ç½®æœªè¢«ä¿®æ”¹

---

#### æµ‹è¯•7ï¼šåˆ·æ–°ååˆ†ç±»é…ç½®ä¿æŒ
**æ­¥éª¤ï¼š**
1. é‡å‘½ååˆ†ç±»"é¢éƒ¨"ä¸º"é¢éƒ¨MOD"
2. åˆ é™¤åˆ†ç±»"æœè£…"
3. ç‚¹å‡»åˆ·æ–°æŒ‰é’®
4. æ£€æŸ¥åˆ†ç±»åˆ—è¡¨

**é¢„æœŸç»“æœï¼š**
- "é¢éƒ¨MOD"ä»æ˜¾ç¤ºä¸º"é¢éƒ¨MOD"
- "æœè£…"ä»å¤„äºéšè—çŠ¶æ€
- é…ç½®æœªä¸¢å¤±

**éªŒè¯ç‚¹ï¼š**
- [ ] DisplayNameä¿æŒ
- [ ] IsHiddenä¿æŒ
- [ ] ä»é…ç½®æ–‡ä»¶æ­£ç¡®åŠ è½½

---

#### æµ‹è¯•8ï¼šMODåˆ†ç±»åˆ·æ–°ä¿æŒ
**æ­¥éª¤ï¼š**
1. åˆ›å»ºæ–°åˆ†ç±»"è‡ªå®šä¹‰"
2. ç§»åŠ¨MODåˆ°"è‡ªå®šä¹‰"
3. ç‚¹å‡»åˆ·æ–°æŒ‰é’®
4. æ£€æŸ¥MODæ‰€åœ¨åˆ†ç±»

**é¢„æœŸç»“æœï¼š**
- MODä»åœ¨"è‡ªå®šä¹‰"åˆ†ç±»
- "è‡ªå®šä¹‰"åˆ†ç±»ä»ç„¶æ˜¾ç¤º

**éªŒè¯ç‚¹ï¼š**
- [ ] MODåˆ†ç±»æœªè¢«é‡ç½®
- [ ] è‡ªå®šä¹‰åˆ†ç±»æœªæ¶ˆå¤±

---

#### æµ‹è¯•9ï¼šå¤šé€‰æ‰¹é‡åˆ é™¤
**æ­¥éª¤ï¼š**
1. Ctrl+ç‚¹å‡»é€‰æ‹©å¤šä¸ªåˆ†ç±»
2. å³é”®é€‰æ‹©"åˆ é™¤åˆ†ç±»"
3. ç¡®è®¤

**é¢„æœŸç»“æœï¼š**
- æ‰€æœ‰é€‰ä¸­åˆ†ç±»è¢«éšè—
- æ‰€æœ‰åˆ†ç±»ä¸‹çš„MODç§»åŠ¨åˆ°"æœªåˆ†ç±»"

**éªŒè¯ç‚¹ï¼š**
- [ ] æ‰¹é‡éšè—æˆåŠŸ
- [ ] MODæ•°æ®æ­£ç¡®æ›´æ–°

---

#### æµ‹è¯•10ï¼šè·¨æ¸¸æˆé…ç½®éš”ç¦»
**æ­¥éª¤ï¼š**
1. åœ¨æ¸¸æˆAä¸­é‡å‘½ååˆ†ç±»"é¢éƒ¨"ä¸º"é¢éƒ¨A"
2. åˆ‡æ¢åˆ°æ¸¸æˆB
3. æ£€æŸ¥åˆ†ç±»"é¢éƒ¨"çš„æ˜¾ç¤ºåç§°

**é¢„æœŸç»“æœï¼š**
- æ¸¸æˆBçš„"é¢éƒ¨"æ˜¾ç¤ºä¸ºé»˜è®¤åç§°ï¼ˆæœªå—å½±å“ï¼‰
- é…ç½®æ–‡ä»¶ç‹¬ç«‹ï¼š`æ¸¸æˆA_category_display.json` å’Œ `æ¸¸æˆB_category_display.json`

**éªŒè¯ç‚¹ï¼š**
- [ ] é…ç½®æ–‡ä»¶éš”ç¦»
- [ ] äº’ä¸å½±å“

---

### æ€§èƒ½æµ‹è¯•

#### æµ‹è¯•11ï¼šå¤§é‡åˆ†ç±»æ€§èƒ½
**æ­¥éª¤ï¼š**
1. åˆ›å»º50ä¸ªè‡ªå®šä¹‰åˆ†ç±»
2. é‡å‘½åæ‰€æœ‰åˆ†ç±»
3. ç‚¹å‡»åˆ·æ–°
4. è®°å½•è€—æ—¶

**é¢„æœŸç»“æœï¼š**
- åˆ·æ–°è€—æ—¶ < 1ç§’
- UIä¸å¡é¡¿

---

#### æµ‹è¯•12ï¼šå¤§é‡MODåˆ†ç±»ç§»åŠ¨
**æ­¥éª¤ï¼š**
1. åˆ›å»ºåˆ†ç±»åŒ…å«100ä¸ªMOD
2. åˆ é™¤è¯¥åˆ†ç±»
3. è®°å½•è€—æ—¶

**é¢„æœŸç»“æœï¼š**
- MODç§»åŠ¨è€—æ—¶ < 3ç§’
- æ•°æ®å®Œæ•´ä¿å­˜

---

### å›å½’æµ‹è¯•

#### æµ‹è¯•13ï¼šåŸæœ‰åŠŸèƒ½æœªå—å½±å“
**éªŒè¯ç‚¹ï¼š**
- [ ] MODå®‰è£…/å¸è½½æ­£å¸¸
- [ ] MODå¯ç”¨/ç¦ç”¨æ­£å¸¸
- [ ] æ‹–æ‹½æ’åºæ­£å¸¸ï¼ˆ"å…¨éƒ¨"å’Œ"æœªåˆ†ç±»"é™¤å¤–ï¼‰
- [ ] æœç´¢è¿‡æ»¤æ­£å¸¸
- [ ] å¤‡ä»½æ¢å¤æ­£å¸¸

---

## æ³¨æ„äº‹é¡¹

### å¼€å‘æ³¨æ„äº‹é¡¹

#### 1. æ•°æ®ä¸€è‡´æ€§
- **Name ä¸å¯å˜**ï¼š`Category.Name` æ˜¯MODå…³è”çš„æ ‡ç­¾åï¼Œä¸è¦ä¿®æ”¹
- **DisplayName å¯å˜**ï¼šåªç”¨äºUIæ˜¾ç¤ºï¼Œå¯ä»¥éšæ„ä¿®æ”¹
- **ä¿®æ”¹MODæ ‡ç­¾**ï¼šå¦‚æœéœ€è¦ä¿®æ”¹MODçš„æ ‡ç­¾ï¼Œå¿…é¡»åŒæ­¥æ›´æ–° `mod.Type` å’Œ `mod.Categories`ï¼Œå¹¶è°ƒç”¨ `SaveModsToModServiceAsync()`

#### 2. é…ç½®æ–‡ä»¶æ“ä½œ
- **åˆå¹¶ç­–ç•¥**ï¼šä¿å­˜é…ç½®æ—¶å¿…é¡»å…ˆåŠ è½½ç°æœ‰é…ç½®ï¼Œå†åˆå¹¶æ›´æ–°
- **UTF8ç¼–ç **ï¼šè¯»å†™é…ç½®æ–‡ä»¶å¿…é¡»ä½¿ç”¨ `System.Text.Encoding.UTF8`
- **è·¯å¾„ç‹¬ç«‹**ï¼šæ¯ä¸ªæ¸¸æˆä½¿ç”¨ç‹¬ç«‹çš„é…ç½®æ–‡ä»¶

#### 3. ObservableCollection åŒæ­¥
- **Dispatcher**ï¼šæ‰€æœ‰UIæ›´æ–°å¿…é¡»åœ¨UIçº¿ç¨‹æ‰§è¡Œï¼ˆä½¿ç”¨ `Dispatcher.Invoke`ï¼‰
- **INotifyPropertyChanged**ï¼š`Category` ç±»å¿…é¡»å®ç°è¯¥æ¥å£ï¼Œç¡®ä¿æ•°æ®ç»‘å®šç”Ÿæ•ˆ
- **OnPropertyChanged**ï¼šä¿®æ”¹å±æ€§åå¿…é¡»è°ƒç”¨ `OnPropertyChanged()`

#### 4. æŸ¥è¯¢é€»è¾‘ä¸€è‡´æ€§
- **ä¿å­˜å’Œæ¢å¤**ï¼šæŸ¥è¯¢ `modInfo` çš„é€»è¾‘å¿…é¡»å®Œå…¨ä¸€è‡´
- **ä¸‰ä¸ªæ¡ä»¶**ï¼š`m.Name == mod.RealName || m.DisplayName == mod.Name || å›¾ç‰‡å¯¹æ¯”`
- **ä¸è¦é—æ¼**ï¼šç‰¹åˆ«æ˜¯ `DisplayName` æ¡ä»¶ï¼Œå®¹æ˜“è¢«é—æ¼

#### 5. æ™ºèƒ½æ˜¾ç¤ºé€»è¾‘
- **è‡ªåŠ¨æ˜¾ç¤º**ï¼šå¦‚æœéšè—åˆ†ç±»æœ‰MODä½¿ç”¨ï¼Œå¿…é¡»è‡ªåŠ¨æ˜¾ç¤º
- **ä¸´æ—¶å–æ¶ˆ**ï¼š`cat.IsHidden = false` åªæ˜¯ä¸´æ—¶å–æ¶ˆï¼Œä¸ä¿®æ”¹é…ç½®æ–‡ä»¶
- **ä¸‹æ¬¡åˆ·æ–°**ï¼šå¦‚æœMODä¸å†ä½¿ç”¨è¯¥åˆ†ç±»ï¼Œä¸‹æ¬¡åˆ·æ–°ä¼šé‡æ–°éšè—

---

### ç”¨æˆ·æ³¨æ„äº‹é¡¹

#### 1. é‡å‘½ååˆ†ç±»
- **åªæ”¹æ˜¾ç¤º**ï¼šé‡å‘½ååªä¿®æ”¹å·¦ä¾§åˆ—è¡¨çš„æ˜¾ç¤ºåç§°
- **æ ‡ç­¾ä¸å˜**ï¼šMODåŒºçš„æ ‡ç­¾åç§°ä¸ä¼šæ”¹å˜
- **æ¢å¤é»˜è®¤**ï¼šè¾“å…¥æ ‡ç­¾åå¯æ¢å¤é»˜è®¤æ˜¾ç¤º

#### 2. åˆ é™¤åˆ†ç±»
- **è½¯åˆ é™¤**ï¼šåˆ é™¤å®é™…ä¸Šæ˜¯éšè—ï¼Œä¸æ˜¯çœŸåˆ é™¤
- **è‡ªåŠ¨ç§»åŠ¨**ï¼šåˆ†ç±»ä¸‹çš„MODä¼šè‡ªåŠ¨ç§»åŠ¨åˆ°"æœªåˆ†ç±»"
- **æ™ºèƒ½æ˜¾ç¤º**ï¼šå¦‚æœMODé‡æ–°ä½¿ç”¨è¯¥åˆ†ç±»ï¼Œå®ƒä¼šè‡ªåŠ¨æ˜¾ç¤º

#### 3. é…ç½®æ–‡ä»¶ä½ç½®
- **è·¯å¾„**ï¼š`%AppData%\UEModManager\{æ¸¸æˆå}_category_display.json`
- **æ‰‹åŠ¨ç¼–è¾‘**ï¼šå¯ä»¥æ‰‹åŠ¨ç¼–è¾‘JSONæ–‡ä»¶ä¿®æ”¹é…ç½®
- **å¤‡ä»½å»ºè®®**ï¼šå»ºè®®å®šæœŸå¤‡ä»½é…ç½®æ–‡ä»¶

---

## åç»­ç»´æŠ¤æŒ‡å—

### ä»£ç ç»´æŠ¤

#### 1. æ·»åŠ æ–°æ¸¸æˆæ”¯æŒ
**éœ€è¦ä¿®æ”¹çš„åœ°æ–¹ï¼š**
- æ— éœ€ä¿®æ”¹åˆ†ç±»ç³»ç»Ÿä»£ç 
- é…ç½®æ–‡ä»¶ä¼šè‡ªåŠ¨åˆ›å»ºï¼ˆæ ¹æ® `_currentGame` å˜é‡ï¼‰

#### 2. æ·»åŠ æ–°çš„åˆ†ç±»å±æ€§
**æ­¥éª¤ï¼š**
1. åœ¨ `Category` ç±»ä¸­æ·»åŠ æ–°å±æ€§
2. åœ¨ `CategoryDisplayConfig` ç±»ä¸­æ·»åŠ å¯¹åº”å­—æ®µ
3. ä¿®æ”¹ `SaveCategoryDisplayConfig()` ä¿å­˜æ–°å­—æ®µ
4. ä¿®æ”¹ `RefreshCategoryDisplay()` åŠ è½½æ–°å­—æ®µ
5. å¦‚éœ€UIæ˜¾ç¤ºï¼Œä¿®æ”¹ `MainWindow.xaml`

**ç¤ºä¾‹ï¼ˆæ·»åŠ é¢œè‰²å±æ€§ï¼‰ï¼š**
```csharp
// Category.cs
public class Category : INotifyPropertyChanged
{
    // ... ç°æœ‰ä»£ç  ...

    private string? _color;
    public string? Color
    {
        get => _color;
        set
        {
            if (_color != value)
            {
                _color = value;
                OnPropertyChanged(nameof(Color));
            }
        }
    }
}

// CategoryDisplayConfig.cs
public class CategoryDisplayConfig
{
    public string? DisplayName { get; set; }
    public bool IsHidden { get; set; }
    public string? Color { get; set; }  // æ–°å¢
}

// SaveCategoryDisplayConfig
config[cat.Name] = new CategoryDisplayConfig
{
    DisplayName = cat.DisplayName,
    IsHidden = cat.IsHidden,
    Color = cat.Color  // æ–°å¢
};

// RefreshCategoryDisplay
cat.Color = config.Color;  // æ–°å¢
```

#### 3. ä¿®æ”¹æ™ºèƒ½æ˜¾ç¤ºé€»è¾‘
**å½“å‰é€»è¾‘**ï¼šåˆ†ç±»ä¸‹æœ‰MODï¼ˆ`Count > 0`ï¼‰åˆ™è‡ªåŠ¨æ˜¾ç¤º

**ä¿®æ”¹ä½ç½®**ï¼š`RefreshCategoryDisplay()` ç¬¬ 8143-8148 è¡Œ
```csharp
if (cat.IsHidden && cat.Count > 0)
{
    Console.WriteLine($"[æ™ºèƒ½æ˜¾ç¤º] åˆ†ç±» '{cat.Name}' è™½ç„¶å·²éšè—ï¼Œä½†ä»æœ‰ {cat.Count} ä¸ªMODä½¿ç”¨ï¼Œè‡ªåŠ¨æ˜¾ç¤º");
    cat.IsHidden = false;  // ä¸´æ—¶å–æ¶ˆéšè—
}
```

**å¯èƒ½çš„ä¿®æ”¹**ï¼š
- åªå¯¹ç”¨æˆ·ä¸»åŠ¨ä½¿ç”¨çš„åˆ†ç±»è‡ªåŠ¨æ˜¾ç¤ºï¼ˆæ’é™¤è‡ªåŠ¨ç”Ÿæˆçš„ï¼‰
- æ·»åŠ ç”¨æˆ·è®¾ç½®ï¼šæ˜¯å¦å¯ç”¨æ™ºèƒ½æ˜¾ç¤º
- æ·»åŠ å»¶è¿Ÿéšè—ï¼šåˆ†ç±»ç©ºé—²30å¤©åæ‰éšè—

#### 4. ä¼˜åŒ–æ€§èƒ½
**å½“å‰ç“¶é¢ˆ**ï¼š
- JSONæ–‡ä»¶è¯»å†™ï¼ˆæ¯æ¬¡åˆ·æ–°éƒ½è¯»å–ï¼‰
- å¤§é‡MODç§»åŠ¨æ—¶çš„æ•°æ®åº“æ“ä½œ

**ä¼˜åŒ–æ–¹æ¡ˆ**ï¼š
- **ç¼“å­˜é…ç½®**ï¼šåœ¨å†…å­˜ä¸­ç¼“å­˜é…ç½®ï¼Œåªåœ¨å¿…è¦æ—¶è¯»å–æ–‡ä»¶
- **æ‰¹é‡æ›´æ–°**ï¼šä½¿ç”¨äº‹åŠ¡æ‰¹é‡æ›´æ–°MODæ•°æ®
- **å¼‚æ­¥æ“ä½œ**ï¼šä½¿ç”¨ `async/await` é¿å…UIé˜»å¡

**ç¤ºä¾‹ï¼ˆç¼“å­˜é…ç½®ï¼‰ï¼š**
```csharp
private Dictionary<string, CategoryDisplayConfig>? _cachedConfig;
private DateTime _configLoadTime;

private Dictionary<string, CategoryDisplayConfig> LoadCategoryDisplayConfig()
{
    // å¦‚æœç¼“å­˜å­˜åœ¨ä¸”ä¸è¶…è¿‡5åˆ†é’Ÿï¼Œç›´æ¥è¿”å›
    if (_cachedConfig != null && (DateTime.Now - _configLoadTime).TotalMinutes < 5)
    {
        return _cachedConfig;
    }

    // ä»æ–‡ä»¶åŠ è½½
    var configPath = GetCategoryDisplayConfigPath();
    if (File.Exists(configPath))
    {
        var json = File.ReadAllText(configPath, System.Text.Encoding.UTF8);
        _cachedConfig = JsonSerializer.Deserialize<Dictionary<...>>(json);
        _configLoadTime = DateTime.Now;
    }

    return _cachedConfig ?? new Dictionary<...>();
}

private void InvalidateConfigCache()
{
    _cachedConfig = null;  // ä¿®æ”¹åæ¸…é™¤ç¼“å­˜
}
```

---

### å¸¸è§é—®é¢˜æ’æŸ¥

#### é—®é¢˜1ï¼šåˆ†ç±»é…ç½®ä¸¢å¤±
**ç—‡çŠ¶**ï¼šé‡å‘½åæˆ–åˆ é™¤çš„åˆ†ç±»åœ¨é‡å¯åæ¢å¤åŸçŠ¶

**æ’æŸ¥æ­¥éª¤**ï¼š
1. æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š`%AppData%\UEModManager\{æ¸¸æˆå}_category_display.json`
2. æ£€æŸ¥æ–‡ä»¶å†…å®¹æ˜¯å¦æ­£ç¡®
3. æ£€æŸ¥æ§åˆ¶å°æ—¥å¿—ï¼šæœç´¢ `[ä¿å­˜]` å’Œ `[åˆ·æ–°]` å…³é”®å­—
4. æ£€æŸ¥æ˜¯å¦æœ‰å¼‚å¸¸ï¼šæœç´¢ `[é”™è¯¯]` æˆ– `[è­¦å‘Š]`

**å¯èƒ½åŸå› **ï¼š
- æ–‡ä»¶æƒé™é—®é¢˜ï¼ˆæ— æ³•å†™å…¥ï¼‰
- JSONåºåˆ—åŒ–å¤±è´¥ï¼ˆç‰¹æ®Šå­—ç¬¦ï¼‰
- æ¸¸æˆåç§°å˜é‡ `_currentGame` ä¸ä¸€è‡´

---

#### é—®é¢˜2ï¼šMODåˆ†ç±»è¢«é‡ç½®
**ç—‡çŠ¶**ï¼šåˆ·æ–°åMODå›åˆ°é»˜è®¤åˆ†ç±»

**æ’æŸ¥æ­¥éª¤**ï¼š
1. æ£€æŸ¥ `RefreshButton_Click` æ˜¯å¦æœ‰å†—ä½™æ¢å¤é€»è¾‘
2. æ£€æŸ¥ `InitializeModsForGame` çš„æŸ¥è¯¢é€»è¾‘
3. æ£€æŸ¥ ModService é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®ä¿å­˜
4. æ£€æŸ¥æ§åˆ¶å°æ—¥å¿—ï¼šæœç´¢ `[DEBUG]`

**å¯èƒ½åŸå› **ï¼š
- æŸ¥è¯¢é€»è¾‘ä¸ä¸€è‡´ï¼ˆä¿å­˜å’Œæ¢å¤ï¼‰
- ModService æœªä¿å­˜
- æ•°æ®æ¢å¤é¡ºåºé”™è¯¯

---

#### é—®é¢˜3ï¼šé»˜è®¤åˆ†ç±»æ— æ³•éšè—
**ç—‡çŠ¶**ï¼šåˆ é™¤é»˜è®¤åˆ†ç±»åä»æ˜¾ç¤º

**æ’æŸ¥æ­¥éª¤**ï¼š
1. æ£€æŸ¥ `RefreshCategoryDisplay` æ˜¯å¦è°ƒç”¨äº† `InitializeDefaultCategories()`
2. æ£€æŸ¥é…ç½®æ–‡ä»¶ä¸­ `IsHidden` å­—æ®µ
3. æ£€æŸ¥æ™ºèƒ½æ˜¾ç¤ºé€»è¾‘æ˜¯å¦è¯¯è§¦å‘

**å¯èƒ½åŸå› **ï¼š
- `InitializeDefaultCategories()` é‡æ–°æ·»åŠ 
- é…ç½®æœªä»æ–‡ä»¶åŠ è½½ï¼ˆä»å†…å­˜åŠ è½½ï¼‰
- åˆ†ç±»ä¸‹æœ‰MODï¼Œæ™ºèƒ½æ˜¾ç¤ºé€»è¾‘è‡ªåŠ¨æ˜¾ç¤º

---

#### é—®é¢˜4ï¼šUIä¸æ›´æ–°
**ç—‡çŠ¶**ï¼šä¿®æ”¹åˆ†ç±»åç§°æˆ–åˆ é™¤åUIæ²¡æœ‰å˜åŒ–

**æ’æŸ¥æ­¥éª¤**ï¼š
1. æ£€æŸ¥ `Category` æ˜¯å¦å®ç° `INotifyPropertyChanged`
2. æ£€æŸ¥æ˜¯å¦è°ƒç”¨ `OnPropertyChanged()`
3. æ£€æŸ¥æ˜¯å¦åœ¨UIçº¿ç¨‹æ›´æ–°ï¼ˆä½¿ç”¨ `Dispatcher.Invoke`ï¼‰
4. æ£€æŸ¥æ˜¯å¦è°ƒç”¨ `RefreshCategoryDisplay()`

**å¯èƒ½åŸå› **ï¼š
- æœªè§¦å‘å±æ€§å˜æ›´é€šçŸ¥
- åœ¨åå°çº¿ç¨‹ä¿®æ”¹UI
- æœªåˆ·æ–° `ObservableCollection`

---

### ç‰ˆæœ¬å…¼å®¹æ€§

#### é…ç½®æ–‡ä»¶è¿ç§»
**æ—§ç‰ˆæœ¬**ï¼šæ— é…ç½®æ–‡ä»¶ï¼Œåˆ†ç±»åç§°å’ŒMODæ ‡ç­¾ç»‘å®š

**æ–°ç‰ˆæœ¬**ï¼šå¼•å…¥é…ç½®æ–‡ä»¶ï¼Œæ”¯æŒDisplayNameå’ŒIsHidden

**è¿ç§»ç­–ç•¥**ï¼š
1. **è‡ªåŠ¨å…¼å®¹**ï¼šæ— é…ç½®æ–‡ä»¶æ—¶è‡ªåŠ¨åˆ›å»º
2. **é»˜è®¤å€¼**ï¼š`DisplayName = null`ï¼Œ`IsHidden = false`
3. **æ— éœ€æ‰‹åŠ¨è¿ç§»**

**ç¤ºä¾‹ï¼ˆé…ç½®æ–‡ä»¶ä¸å­˜åœ¨ï¼‰ï¼š**
```csharp
// RefreshCategoryDisplay
var savedConfig = LoadConfigFromFile();  // è¿”å› null æˆ–ç©ºå­—å…¸

foreach (var cat in newCategories) {
    if (savedConfig != null && savedConfig.TryGetValue(cat.Name, out var config)) {
        cat.DisplayName = config.DisplayName;
        cat.IsHidden = config.IsHidden;
    } else {
        // ä½¿ç”¨é»˜è®¤å€¼ï¼ˆå·²åœ¨Categoryæ„é€ æ—¶åˆå§‹åŒ–ï¼‰
        // DisplayName = null, IsHidden = false
    }
}
```

---

### æ‰©å±•å»ºè®®

#### 1. åˆ†ç±»å›¾æ ‡
**éœ€æ±‚**ï¼šå…è®¸ç”¨æˆ·ä¸ºåˆ†ç±»è®¾ç½®è‡ªå®šä¹‰å›¾æ ‡

**å®ç°**ï¼š
- æ·»åŠ  `Category.IconPath` å±æ€§
- æ·»åŠ  `CategoryDisplayConfig.IconPath` å­—æ®µ
- ä¿®æ”¹ XAML ç»‘å®šå›¾æ ‡
- æ·»åŠ å³é”®èœå•"è®¾ç½®å›¾æ ‡"

#### 2. åˆ†ç±»é¢œè‰²
**éœ€æ±‚**ï¼šå…è®¸ç”¨æˆ·ä¸ºåˆ†ç±»è®¾ç½®é¢œè‰²æ ‡è®°

**å®ç°**ï¼š
- æ·»åŠ  `Category.Color` å±æ€§
- æ·»åŠ  `CategoryDisplayConfig.Color` å­—æ®µ
- ä¿®æ”¹ XAML èƒŒæ™¯è‰²ç»‘å®š
- æ·»åŠ é¢œè‰²é€‰æ‹©å™¨

#### 3. åˆ†ç±»æ’åº
**éœ€æ±‚**ï¼šå…è®¸ç”¨æˆ·è‡ªå®šä¹‰åˆ†ç±»é¡ºåº

**å®ç°**ï¼š
- æ·»åŠ  `Category.SortOrder` å±æ€§
- æ·»åŠ  `CategoryDisplayConfig.SortOrder` å­—æ®µ
- å®ç°æ‹–æ‹½æ’åº
- æŒ‰ `SortOrder` æ’åºè€Œéå­—æ¯åº

#### 4. å¯¼å…¥/å¯¼å‡ºåˆ†ç±»é…ç½®
**éœ€æ±‚**ï¼šè·¨è®¾å¤‡åŒæ­¥åˆ†ç±»é…ç½®

**å®ç°**ï¼š
- æ·»åŠ "å¯¼å‡ºé…ç½®"æŒ‰é’®ï¼Œä¿å­˜JSONæ–‡ä»¶
- æ·»åŠ "å¯¼å…¥é…ç½®"æŒ‰é’®ï¼ŒåŠ è½½JSONæ–‡ä»¶
- æ”¯æŒé€‰æ‹©æ€§å¯¼å…¥ï¼ˆåˆå¹¶æˆ–è¦†ç›–ï¼‰

#### 5. æ‰¹é‡æ“ä½œ
**éœ€æ±‚**ï¼šæ‰¹é‡é‡å‘½åã€æ‰¹é‡åˆ é™¤ã€æ‰¹é‡ç§»åŠ¨

**å®ç°**ï¼š
- å¤šé€‰åˆ†ç±»ï¼ˆCtrl+ç‚¹å‡»ï¼‰
- å³é”®èœå•æ”¯æŒæ‰¹é‡æ“ä½œ
- ç¡®è®¤å¯¹è¯æ¡†æ˜¾ç¤ºæ“ä½œè¯¦æƒ…

---

## æ€»ç»“

### æœ¬æ¬¡ä¿®æ”¹è¦ç‚¹

1. **æ•°æ®æ¨¡å‹æ‰©å±•**ï¼š`Category` æ·»åŠ  `DisplayName` å’Œ `IsHidden` å±æ€§
2. **é…ç½®æŒä¹…åŒ–**ï¼šJSONæ–‡ä»¶å­˜å‚¨åˆ†ç±»é…ç½®
3. **é…ç½®åˆå¹¶ç­–ç•¥**ï¼šé¿å…ä¸¢å¤±éšè—åˆ†ç±»é…ç½®
4. **ä»æ–‡ä»¶åŠ è½½**ï¼šä¸ä¾èµ–å†…å­˜é›†åˆ
5. **ç§»é™¤é‡å¤åˆå§‹åŒ–**ï¼šé¿å…è¦†ç›–éšè—çŠ¶æ€
6. **ç»Ÿä¸€æ•°æ®æ¢å¤**ï¼šç§»é™¤å†—ä½™æ¢å¤é€»è¾‘

### å…³é”®æŠ€æœ¯ç‚¹

- **é…ç½®åˆå¹¶**ï¼šä¿å­˜å‰åŠ è½½ç°æœ‰é…ç½®
- **æ•°æ®ç»‘å®š**ï¼š`INotifyPropertyChanged` å’Œ `ObservableCollection`
- **è®¡ç®—å±æ€§**ï¼š`DisplayText => DisplayName ?? Name`
- **æ™ºèƒ½æ˜¾ç¤º**ï¼šæœ‰MODä½¿ç”¨æ—¶è‡ªåŠ¨æ˜¾ç¤ºéšè—åˆ†ç±»
- **æŸ¥è¯¢ä¸€è‡´æ€§**ï¼šä¿å­˜å’Œæ¢å¤ä½¿ç”¨ç›¸åŒæŸ¥è¯¢æ¡ä»¶

### å·²ä¿®å¤çš„BUG

1. âœ… è½¯åˆ é™¤ä¸ç”Ÿæ•ˆï¼ˆé…ç½®åˆå¹¶ç­–ç•¥ï¼‰
2. âœ… åˆ·æ–°åé…ç½®ä¸¢å¤±ï¼ˆä»æ–‡ä»¶åŠ è½½ï¼‰
3. âœ… é»˜è®¤åˆ†ç±»æ— æ³•éšè—ï¼ˆç§»é™¤é‡å¤åˆå§‹åŒ–ï¼‰
4. âœ… MODåˆ†ç±»è¢«é‡ç½®ï¼ˆç§»é™¤å†—ä½™æ¢å¤ï¼‰

### æµ‹è¯•é€šè¿‡é¡¹

- âœ… é‡å‘½ååˆ†ç±»ï¼ˆDisplayNameç‹¬ç«‹ï¼‰
- âœ… åˆ é™¤åˆ†ç±»ï¼ˆè½¯åˆ é™¤+MODç§»åŠ¨ï¼‰
- âœ… åˆ·æ–°ä¿æŒé…ç½®ï¼ˆæŒä¹…åŒ–ï¼‰
- âœ… æ™ºèƒ½æ˜¾ç¤ºï¼ˆè‡ªåŠ¨æ˜¾ç¤ºæœ‰MODçš„éšè—åˆ†ç±»ï¼‰
- âœ… é»˜è®¤åˆ†ç±»å¯æ“ä½œï¼ˆé¢éƒ¨ã€äººç‰©ã€æ­¦å™¨ç­‰ï¼‰

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼š1.0
**æœ€åæ›´æ–°**ï¼š2025-10-05
**ç»´æŠ¤äººå‘˜**ï¼šä¸‹ä¸€ä»»å¼€å‘è€…
**æŠ€æœ¯æ”¯æŒ**ï¼šæŸ¥çœ‹æœ¬æ–‡æ¡£"åç»­ç»´æŠ¤æŒ‡å—"ç« èŠ‚

**é‡è¦æé†’**ï¼š
1. ä¿®æ”¹ä»£ç å‰åŠ¡å¿…ç†è§£"æ•°æ®æµå›¾"å’Œ"å…³é”®æŠ€æœ¯ç‚¹"
2. é‡åˆ°é—®é¢˜å…ˆæŸ¥çœ‹"å¸¸è§é—®é¢˜æ’æŸ¥"ç« èŠ‚
3. æ·»åŠ æ–°åŠŸèƒ½å‚è€ƒ"ä»£ç ç»´æŠ¤"ç« èŠ‚
4. æ‰€æœ‰æ¶‰åŠåˆ†ç±»é…ç½®çš„ä¿®æ”¹éƒ½è¦è€ƒè™‘é…ç½®æ–‡ä»¶çš„è¯»å†™

---

## é™„å½•

### é™„å½•Aï¼šé…ç½®æ–‡ä»¶æ ¼å¼

**æ–‡ä»¶è·¯å¾„**ï¼š`%AppData%\UEModManager\{æ¸¸æˆå}_category_display.json`

**å®Œæ•´ç¤ºä¾‹**ï¼š
```json
{
  "é¢éƒ¨": {
    "DisplayName": "é¢éƒ¨MOD",
    "IsHidden": false
  },
  "äººç‰©": {
    "DisplayName": null,
    "IsHidden": false
  },
  "æ­¦å™¨": {
    "DisplayName": "æ­¦å™¨è£…å¤‡",
    "IsHidden": true
  },
  "æœè£…": {
    "DisplayName": null,
    "IsHidden": true
  },
  "è‡ªå®šä¹‰1": {
    "DisplayName": "æˆ‘çš„æ”¶è—",
    "IsHidden": false
  }
}
```

**å­—æ®µè¯´æ˜**ï¼š
- **DisplayName**ï¼šè‡ªå®šä¹‰æ˜¾ç¤ºåç§°ï¼Œ`null` è¡¨ç¤ºä½¿ç”¨é»˜è®¤åç§°
- **IsHidden**ï¼šæ˜¯å¦éšè—ï¼Œ`true` è¡¨ç¤ºå·²åˆ é™¤ï¼ˆè½¯åˆ é™¤ï¼‰

---

### é™„å½•Bï¼šç›¸å…³ä»£ç ä½ç½®ç´¢å¼•

| åŠŸèƒ½ | æ–‡ä»¶ | è¡Œå· | è¯´æ˜ |
|-----|------|------|------|
| Category æ•°æ®æ¨¡å‹ | MainWindow.xaml.cs | 10623-10691 | åˆ†ç±»æ•°æ®æ¨¡å‹å®šä¹‰ |
| CategoryDisplayConfig | MainWindow.xaml.cs | 10693-10697 | é…ç½®æ–‡ä»¶æ•°æ®æ¨¡å‹ |
| GetCategoryDisplayConfigPath | MainWindow.xaml.cs | 10582-10590 | è·å–é…ç½®æ–‡ä»¶è·¯å¾„ |
| SaveCategoryDisplayConfig | MainWindow.xaml.cs | 10514-10575 | ä¿å­˜é…ç½®ï¼ˆåˆå¹¶ç­–ç•¥ï¼‰ |
| RefreshCategoryDisplay | MainWindow.xaml.cs | 8071-8196 | åˆ·æ–°åˆ†ç±»æ˜¾ç¤º |
| - ä»æ–‡ä»¶åŠ è½½é…ç½® | MainWindow.xaml.cs | 8108-8142 | åŠ è½½DisplayNameå’ŒIsHidden |
| - æ™ºèƒ½æ˜¾ç¤ºé€»è¾‘ | MainWindow.xaml.cs | 8143-8148 | è‡ªåŠ¨æ˜¾ç¤ºæœ‰MODçš„éšè—åˆ†ç±» |
| - ç§»é™¤é‡å¤åˆå§‹åŒ– | MainWindow.xaml.cs | 8187-8196 | å·²åˆ é™¤InitializeDefaultCategories |
| RenameCategoryButton_Click | MainWindow.xaml.cs | 9670-9730 | é‡å‘½ååˆ†ç±» |
| DeleteCategoryButton_Click | MainWindow.xaml.cs | 8255-8382 | è½¯åˆ é™¤åˆ†ç±» |
| MoveToCategorySubMenuItem | MainWindow.xaml.cs | 9081-9116 | ç§»åŠ¨MODèœå•æ˜¾ç¤ºæ ¼å¼ |
| RefreshButton_Click | MainWindow.xaml.cs | 4519-4525 | ç§»é™¤å†—ä½™æ¢å¤é€»è¾‘ |
| UIç»‘å®š | MainWindow.xaml | 168 | Text="{Binding DisplayText}" |

---

### é™„å½•Cï¼šæ§åˆ¶å°æ—¥å¿—å…³é”®å­—

è°ƒè¯•æ—¶å¯æœç´¢ä»¥ä¸‹å…³é”®å­—ï¼š

| å…³é”®å­— | è¯´æ˜ | ç¤ºä¾‹ |
|-------|------|------|
| `[ä¿å­˜]` | ä¿å­˜åˆ†ç±»é…ç½® | `[ä¿å­˜] åˆ†ç±»æ˜¾ç¤ºé…ç½®å·²ä¿å­˜: 5 ä¸ªåˆ†ç±»` |
| `[åˆ·æ–°]` | åˆ·æ–°åˆ†ç±»æ˜¾ç¤º | `[åˆ·æ–°] ä»é…ç½®æ–‡ä»¶åŠ è½½: 5 ä¸ªåˆ†ç±»é…ç½®` |
| `[é‡å‘½å]` | é‡å‘½ååˆ†ç±» | `[é‡å‘½å] è®¾ç½®åˆ†ç±» 'é¢éƒ¨' çš„æ˜¾ç¤ºåç§°ä¸º 'é¢éƒ¨MOD'` |
| `[åˆ é™¤]` | åˆ é™¤åˆ†ç±» | `[åˆ é™¤] åˆ†ç±» 'æ­¦å™¨' å·²è®¾ç½®ä¸ºéšè—` |
| `[æ™ºèƒ½æ˜¾ç¤º]` | æ™ºèƒ½æ˜¾ç¤ºéšè—åˆ†ç±» | `[æ™ºèƒ½æ˜¾ç¤º] åˆ†ç±» 'æ­¦å™¨' è™½ç„¶å·²éšè—ï¼Œä½†ä»æœ‰ 3 ä¸ªMODä½¿ç”¨` |
| `[DEBUG]` | è°ƒè¯•ä¿¡æ¯ | `[DEBUG] MODæ•°æ®å·²åœ¨ InitializeModsForGame ä¸­ä» ModService å®Œæ•´æ¢å¤` |
| `[é”™è¯¯]` | é”™è¯¯ä¿¡æ¯ | `[é”™è¯¯] ä¿å­˜åˆ†ç±»æ˜¾ç¤ºé…ç½®å¤±è´¥: ...` |
| `[è­¦å‘Š]` | è­¦å‘Šä¿¡æ¯ | `[è­¦å‘Š] åŠ è½½åˆ†ç±»é…ç½®å¤±è´¥: ...` |

---

### é™„å½•Dï¼šGit Commit å†å²

**ç›¸å…³æäº¤è®°å½•**ï¼š
```
commit xxxx - feat: å®ç°åˆ†ç±»è½¯åˆ é™¤å’ŒMODè‡ªåŠ¨ç§»åŠ¨
commit xxxx - fix: ä¿®å¤é»˜è®¤åˆ†ç±»æ— æ³•éšè—çš„é—®é¢˜
commit xxxx - fix: ä¿®å¤åˆ·æ–°åMODåˆ†ç±»è¢«é‡ç½®çš„é—®é¢˜
commit xxxx - refactor: ç§»é™¤RefreshButton_Clickä¸­çš„å†—ä½™æ•°æ®æ¢å¤é€»è¾‘
```

---

**æ–‡æ¡£ç»“æŸ**

å¦‚æœ‰ç–‘é—®ï¼Œè¯·å‚è€ƒä»£ç æ³¨é‡Šæˆ–è”ç³»å‰ä»»å¼€å‘è€…ã€‚
