<Window x:Class="UEModManager.Views.LoginWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="验证码登录 - UEModManager" Height="550" Width="400"
        WindowStartupLocation="CenterScreen"
        Background="#0B1426"
        ResizeMode="NoResize"
        Style="{StaticResource DarkFlatWindow}">
    <Window.CommandBindings>
        <CommandBinding Command="{x:Static SystemCommands.MinimizeWindowCommand}" Executed="OnMinimizeWindow" />
        <CommandBinding Command="{x:Static SystemCommands.MaximizeWindowCommand}" Executed="OnMaximizeWindow" />
        <CommandBinding Command="{x:Static SystemCommands.RestoreWindowCommand}" Executed="OnRestoreWindow" />
        <CommandBinding Command="{x:Static SystemCommands.CloseWindowCommand}" Executed="OnCloseWindow" />
    </Window.CommandBindings>

    <Window.Resources>
        <Style x:Key="InputTextBox" TargetType="TextBox">
            <Setter Property="Background" Value="#1A2433"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#2A3441"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,5"/>
        </Style>

        <Style x:Key="PrimaryButton" TargetType="Button">
            <Setter Property="Background" Value="#FBBF24"/>
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Height" Value="45"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Margin" Value="0,10"/>
        </Style>

        <Style x:Key="SecondaryButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#FBBF24"/>
            <Setter Property="BorderBrush" Value="#FBBF24"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Margin" Value="0,8"/>
        </Style>

        <Style TargetType="TextBlock">
            <Setter Property="TextWrapping" Value="Wrap"/>
        </Style>
    </Window.Resources>

    <Grid Margin="40">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="15"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="10"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="15"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="15"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="15"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 语言切换按钮 -->
        <Button Grid.Row="0"
                x:Name="LanguageToggleButton"
                Content="EN"
                HorizontalAlignment="Right"
                VerticalAlignment="Top"
                Width="40" Height="25"
                Background="#2A3441"
                Foreground="White"
                BorderThickness="0"
                FontSize="11"
                Cursor="Hand"
                Click="LanguageToggleButton_Click"/>

        <!-- Logo和标题 -->
        <StackPanel Grid.Row="0" HorizontalAlignment="Center">
            <TextBlock Text="🎮 UEModManager"
                       FontSize="24" FontWeight="Bold"
                       Foreground="White" HorizontalAlignment="Center"/>
            <TextBlock x:Name="TitleText"
                       Text="验证码登录"
                       FontSize="14" Foreground="#9CA3AF"
                       HorizontalAlignment="Center" Margin="0,5"/>
        </StackPanel>

        <!-- 提示信息 -->
        <StackPanel Grid.Row="2">
            <TextBlock x:Name="SmartAuthHint"
                     Text="💡 新用户首次登录将自动注册账号"
                     Foreground="#FBBF24"
                     FontSize="11"
                     Margin="0,0,0,0"
                     TextWrapping="Wrap"
                     HorizontalAlignment="Center"/>
        </StackPanel>

        <!-- 邮箱输入 -->
        <StackPanel Grid.Row="4">
            <TextBlock x:Name="EmailLabel" Text="邮箱地址" Foreground="White" FontSize="12" Margin="0,0,0,5"/>
            <TextBox x:Name="EmailTextBox"
                     Style="{StaticResource InputTextBox}"
                     TextChanged="EmailTextBox_TextChanged"/>
        </StackPanel>

        <!-- 验证码发送按钮 -->
        <Button Grid.Row="6"
                x:Name="SendOtpButton"
                Content="发送验证码"
                Style="{StaticResource PrimaryButton}"
                Click="SendOtpButton_Click"/>

        <!-- 验证码输入 -->
        <StackPanel Grid.Row="8" x:Name="OtpInputPanel" Visibility="Collapsed">
            <TextBlock Text="验证码（6位数字）" Foreground="White" FontSize="12" Margin="0,0,0,5"/>
            <TextBox x:Name="OtpTextBox"
                     Style="{StaticResource InputTextBox}"
                     MaxLength="6"
                     TextChanged="OtpTextBox_TextChanged"/>
            <TextBlock x:Name="OtpHintText"
                     Text="验证码已发送到您的邮箱，10分钟内有效"
                     Foreground="#10B981"
                     FontSize="11"
                     Margin="5,5,0,0"/>
        </StackPanel>

        <!-- 验证登录按钮 -->
        <Button Grid.Row="10"
                x:Name="VerifyLoginButton"
                Content="验证登录"
                Style="{StaticResource PrimaryButton}"
                Visibility="Collapsed"
                Click="VerifyLoginButton_Click"/>

        <!-- 加载遮罩 -->
        <Grid x:Name="LoadingOverlay" Grid.RowSpan="11" Background="#80000000" Visibility="Collapsed">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <ProgressBar Width="100" Height="10" IsIndeterminate="True" Margin="0,0,0,10"/>
                <TextBlock x:Name="LoadingText" Text="正在处理..." Foreground="White" HorizontalAlignment="Center"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>
